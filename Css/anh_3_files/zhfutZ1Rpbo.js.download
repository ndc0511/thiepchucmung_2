;/*FB_PKG_DELIM*/

__d("BotFeedbackKind",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9,BOT_FEEDBACK_NEGATIVE_PERSONALIZED:10,BOT_FEEDBACK_NEGATIVE_CLARITY:11});f["default"]=a}),66);
__d("AdsAIMessengerConstants",["fbt","BotFeedbackKind"],(function(a,b,c,d,e,f,g,h){"use strict";b={title:h._("__JHASH__AVG11ix_BXJ__JHASH__"),value:(a=c("BotFeedbackKind")).BOT_FEEDBACK_NEGATIVE_HELPFUL};d={title:h._("__JHASH__wSP_qVisuoi__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_PERSONALIZED};e={title:h._("__JHASH__3krIxTLZtOD__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_ACCURATE};f={title:h._("__JHASH__O_hReSSI8n7__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_SAFE};c={title:h._("__JHASH__nQnVxqmzNMI__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_CLARITY};var i={title:h._("__JHASH__fdY6Ska9rb-__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_OTHER};b={excludingOther:[b,d,e,f,c],feedbackOptionOther:i};d=new Map([[a.BOT_FEEDBACK_NEGATIVE_GENERIC,"ads_ai_submit_negative_feedback_generic"],[a.BOT_FEEDBACK_NEGATIVE_HELPFUL,"ads_ai_submit_negative_feedback_not_relevant"],[a.BOT_FEEDBACK_NEGATIVE_ACCURATE,"ads_ai_submit_negative_feedback_not_accurate"],[a.BOT_FEEDBACK_NEGATIVE_INTERESTING,"ads_ai_submit_negative_feedback_repetitive"],[a.BOT_FEEDBACK_NEGATIVE_SAFE,"ads_ai_submit_negative_feedback_harmful"],[a.BOT_FEEDBACK_NEGATIVE_CLARITY,"ads_ai_submit_negative_feedback_hard_to_understand"],[a.BOT_FEEDBACK_NEGATIVE_PERSONALIZED,"ads_ai_submit_negative_feedback_not_personalized"],[a.BOT_FEEDBACK_NEGATIVE_OTHER,"ads_ai_submit_negative_feedback_other"]]);e=h._("__JHASH__5X9UcGT23B8__JHASH__");g.FEEDBACK_OPTIONS=b;g.BotFeedbackKindToLoggerEventMapping=d;g.feedbackModalHeader=e}),226);
__d("AdsAIMessengerUtils",["AdsAIMessengerConstants","AdsAISitevarConfig","I64","RelayHooks","randomShuffleSeeded","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;f=h||d("react");f.useMemo;var j=f.c;function k(a){return m(a.senderId)}function l(a){return a.botResponseId!=null&&a.botResponseId.startsWith("ads_ai_shiba")}function a(a){return k(a)||l(a)}function m(a){return c("AdsAISitevarConfig").bot_id!=null&&(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_string(c("AdsAISitevarConfig").bot_id))}function b(){var a=j(2),b=d("RelayHooks").useActorID(),e=d("AdsAIMessengerConstants").FEEDBACK_OPTIONS.excludingOther,f=d("AdsAIMessengerConstants").FEEDBACK_OPTIONS.feedbackOptionOther;a[0]!==b?(e=[].concat(e),c("randomShuffleSeeded")(e,parseInt(b,10)).push(f),a[0]=b,a[1]=e):e=a[1];f=e;return f}function e(a){if(a==null)return;return parseInt(a.slice(-16),10)}g.isMessageFromAdsAIBot=k;g.isMessageFromAdsAIShibaBot=l;g.isMessageFromAdsAI=a;g.isAdsAIParticipant=m;g.useRandomizedAdsAINegativeFeedbackOptions=b;g.generateInstanceIDFromOTID=e}),98);
__d("LSClearMessageSearchTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(69).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(c){return b.forEach(b.db.table(70).fetch([[[a[0]]]]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSSearchClearMessageSearchTableStoredProcedure";e.exports=a}),null);
__d("LSClearMessageSearchTableStoredProcedure",["LSClearMessageSearchTable","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSClearMessageSearchTable")(b.type_,a)}g["default"]=a}),98);
__d("LSCommunityThreadCreationStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({FAILURE:2,PENDING:0,SUCCESS:1});f["default"]=a}),66);
__d("LSCreateCommunitySubThread",["LSCreateOfflineThreadingID","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=new c.Map(),d[2].set("client_mutation_id",d[1]),d[2].set("community_id",a[0]),d[2].set("parent_message_id",a[2]),d[2].set("parent_thread_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("parent_thread_id"),d[2],d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["create_community_sub_thread","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,665]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxCreateCommunitySubThreadStoredProcedure";e.exports=a}),null);
__d("LSCreateCommunitySubThreadStoredProcedure",["LSCreateCommunitySubThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSCreateCommunitySubThread")(b.communityId,b.parentThreadId,b.parentMessageId,a)}g["default"]=a}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteReactionStoredProcedure";e.exports=a}),null);
__d("LSLocalApplyOptimisticCommunityChatSubThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID","LSUpdateMessageSubThreadKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.cast([0,16408]),d[1]=c.i64.cast([0,0]),d[2]=c.i64.cast([0,268437504]),d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,261320435]),void 0).then(function(a){return d[6]=a})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,e){var f=b.done;b=b.value;return f?d[7]=d[6]:(e=b.item,c.sequence([function(b){return d[22]=e.text,d[22]!==void 0?c.resolve(d[21]=d[22]):c.sequence([function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[23]=void 0:(c=b.item,d[23]=c.senderId)})},function(a){return c.localizeV2Async(c.i64.cast([0,1369731110]),void 0).then(function(a){return d[25]=a})},function(b){return c.i64.neq(d[23],void 0)?c.sequence([function(b){return c.db.table(216).fetch([[[d[23],a[0]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[30]=void 0:(c=b.item,d[30]=c.profileName)})},function(a){return c.filter(c.db.table(7).fetch([[[d[23]]]]),function(a){return c.i64.eq(a.id,d[23])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[32]=void 0:(c=b.item,d[36]=c.firstName,d[36]!==void 0?d[35]=d[36]:d[35]=c.name,d[32]=d[35])})},function(a){return d[30]!==void 0?d[34]=d[30]:(d[32]!==void 0?d[35]=d[32]:d[35]=d[25],d[34]=d[35]),d[26]=d[34]}]):c.resolve(d[26]=d[25])},function(b){return c.db.table(16).fetch([[[a[1],a[2]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[27]=void 0:(c=b.item,d[27]=c.attachmentType)})},function(a){return c.i64.eq(d[27],c.i64.cast([0,5]))?c.sequence([function(a){return d[30]=c.createArray(),d[32]=(d[30].push(d[26]),d[30]),c.localizeV2Async(c.i64.cast([0,216075330]),d[30]).then(function(a){return d[31]=a})},function(a){return d[29]=d[31]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,2]))?c.sequence([function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[26]),d[31]),c.localizeV2Async(c.i64.cast([0,3093868587]),d[31]).then(function(a){return d[32]=a})},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,4]))?c.sequence([function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[26]),d[32]),c.localizeV2Async(c.i64.cast([0,1965569930]),d[32]).then(function(a){return d[33]=a})},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,1]))?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[26]),d[33]),c.localizeV2Async(c.i64.cast([0,3981943156]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,3]))?c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[26]),d[34]),c.localizeV2Async(c.i64.cast([0,2071149394]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}]):c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[26]),d[34]),c.localizeV2Async(c.i64.cast([0,2414298738]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[30]=d[31]}])},function(a){return d[29]=d[30]}])},function(a){return d[21]=d[29]}])},function(a){return d[7]=d[21]}]))})},function(b){return d[9]=d[7],c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[10]=c[0],d[11]=c[1],c):(b=a.item,c=[b.themeFbid,b.customEmoji],d[10]=c[0],d[11]=c[1],c)})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.forEach(c.filter(c.db.table(9).fetch([[[d[5]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[5],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,26]),clientThreadKey:d[5],folderName:"community",parentThreadKey:a[1],lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[13],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[0],capabilities2:d[1],capabilities3:d[2],capabilities4:d[3],threadName:d[9],themeFbid:d[10],customEmoji:d[11]})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.senderId)})},function(a){return d[16]=c.createArray(),c.i64.neq(d[14],void 0)?d[21]=(d[16].push(d[14]),d[16]):0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return c.i64.neq(d[14],d[17])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[22]=(d[16].push(d[21]),d[16])}]):c.resolve()},function(a){return d[18]=c.i64.of_int32(d[16].length),c.i64.gt(d[18],c.i64.cast([0,0]))?c.loopAsync(d[18],function(a){return d[21]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[16],d[21]).then(function(a){return a=a,d[22]=a[0],d[23]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(14).fetch([[[d[5],d[22]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[22])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[5],contactId:d[22],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(e){return c.storedProcedure(b("LSUpdateMessageSubThreadKey"),a[2],d[5])},function(a){return c.resolve()},function(b){return d[19]=new c.Map(),d[19].set("client_mutation_id",d[5]),d[19].set("community_id",a[0]),d[19].set("parent_thread_id",a[1]),d[19].set("parent_message_id",a[2]),d[20]=c.toJSON(d[19]),c.db.table(312).put({threadKey:d[5],metadata:d[20]})},function(a){return e[0]=d[5]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticCommunityChatSubThreadStoredProcedure";e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThread",["LSIssueNewTask","LSLocalApplyOptimisticCommunityChatSubThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticCommunityChatSubThread"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return d[1]=new c.Map(),d[1].set("client_thread_key",d[0]),d[1].set("community_id",a[0]),d[1].set("parent_thread_id",a[1]),d[1].set("parent_message_id",a[2]),d[2]=d[1].get("client_thread_key"),d[1],d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[2]),c.i64.cast([0,749]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalCreateOptimisticCommunityChatSubThreadStoredProcedure";e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",["LSLocalCreateOptimisticCommunityChatSubThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSLocalCreateOptimisticCommunityChatSubThread")(b.communityId,b.parentThreadId,b.parentMessageId,a)}g["default"]=a}),98);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSOptimisticContributeToTextPrompt",["LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.createArray(),d[1]=new c.Map(),d[1].set("snippet_has_emoji",void 0),d[1].set("sticker_id",void 0),d[1].set("sticker_alt_text",void 0),d[1].set("hot_emoji_size",void 0),d[1].set("external_attachment_url",void 0),d[1].set("attribution_app_id",void 0),d[1].set("source",c.i64.cast([0,0])),d[1].set("platform_ref",void 0),d[1].set("platform_token",void 0),d[1].set("reply_source_id",void 0),d[1].set("reply_source_type",void 0),d[1].set("reply_source_type_v2",void 0),d[1].set("mention_data",void 0),d[1].set("mark_read",void 0),d[1].set("calculate_denormalizations",void 0),d[1].set("optimistic_attachment_preview",void 0),d[1].set("initiating_app_id",void 0),d[1].set("initiating_source",void 0),d[1].set("power_up_style",c.i64.cast([0,0])),d[1].set("data_trace_id",void 0),d[1].set("attachments",d[0]),d[1].set("should_copy_attachments",!1),d[1].set("magic_words_data",void 0),d[1].set("local_data_id",void 0),d[1].set("reply_type",void 0),d[1].set("dety_params",void 0),d[1].set("product_type","roll_call"),d[1].set("product_fbid",a[2]),d[1].set("product_attribution",a[3]),c.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[1],a[0],c.i64.cast([0,18]),a[4],a[4],d[1],void 0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return d[4]=c.createArray(),c.storedProcedure(b("LSLocalApplyOptimisticRollCallContribution"),a[0],a[2],d[4],d[2],d[3],a[3],c.i64.cast([0,1]),a[4])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticContributeToTextPromptStoredProcedure";e.exports=a}),null);
__d("LSOptimisticContributeToTextPromptStoredProcedure",["LSOptimisticContributeToTextPrompt","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSOptimisticContributeToTextPrompt")(b.threadKey,b.senderId,b.promptId,b.productAttribution,b.text,a)}g["default"]=a}),98);
__d("LSOptimisticCreateRollCall",["LSCreateOfflineThreadingID","LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(b){return c.forEach(c.filter(c.db.table(250).fetch([[[d[1],a[0]]]]),function(b){return c.i64.eq(b.rollCallId,d[1])&&c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(250).add({rollCallId:d[1],threadKey:a[0],rollCallPrompt:a[1],expiryTimestampSec:c.i64.cast([0,0]),isBlurred:!1,authorityLevel:c.i64.cast([0,20]),offlineThreadingId:d[1],canViewWithoutContributing:!1})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("prompt",a[1]),d[2].set("offline_threading_id",d[1]),d[2].set("prompt_type",a[2]),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=!1:(b=a.item,c.sequence([function(a){return c.filter(c.db.table(14).fetch([[[b.threadKey,d[3]]]]),function(a){return c.i64.eq(a.threadKey,b.threadKey)&&c.i64.eq(c.i64.cast([0,0]),b.mailboxType)&&c.i64.eq(a.contactId,d[3])}).next().then(function(e,f){var a=e.done;e=e.value;return a?d[8]=!1:(f=e.item,c.i64.eq(b.threadType,c.i64.cast([0,152]))?(d[11]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[12]=!1:d[12]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[11]),c.i64.cast([0,0])),d[13]=b.capabilities,d[14]=b.capabilities2,d[15]=b.capabilities3,d[16]=b.capabilities4,d[18]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[19]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[18],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,252]))?d[17]=!1:(c.i64.eq(d[18],c.i64.cast([0,0]))?d[20]=!c.i64.eq(c.i64.and_(d[19],d[13]),c.i64.cast([0,0])):(c.i64.eq(d[18],c.i64.cast([0,1]))?d[21]=!c.i64.eq(c.i64.and_(d[19],d[14]),c.i64.cast([0,0])):(c.i64.eq(d[18],c.i64.cast([0,2]))?d[22]=!c.i64.eq(c.i64.and_(d[19],d[15]),c.i64.cast([0,0])):(c.i64.eq(d[18],c.i64.cast([0,3]))?d[23]=!c.i64.eq(c.i64.and_(d[19],d[16]),c.i64.cast([0,0])):d[23]=!1,d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[17]=d[20]),d[12]===d[17]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[10]=d[12]):d[10]=!1,d[8]=d[10])})},function(a){return d[4]=d[8]}]))})},function(a){return d[4]?d[2].set("perform_action_as_page",!0):0,d[6]=d[2].get("thread_key"),d[2],d[7]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[6]),c.i64.cast([0,607]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticCreateRollCallStoredProcedure";e.exports=a}),null);
__d("LSOptimisticCreateRollCallStoredProcedure",["LSOptimisticCreateRollCall","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSOptimisticCreateRollCall")(b.threadKey,b.prompt,b.promptType,a)}g["default"]=a}),98);
__d("LSOptimisticUpsertReaction",["LSArrayGetObjectAt","LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[2],d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(a){return void 0?d[9]=!1:d[9]=!0,d[9]?c.resolve(d[10]=void 0):c.sequence([function(a){return d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=new c.Map(),d[30]="product_params",d[23]=d[21].get(d[30]),d[21],d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[41]="product_type",d[38]=d[23].get(d[41]),d[23],d[38]!==void 0?d[37].set(d[41],d[38]):0,d[42]="product_extras",d[39]=d[23].get(d[42]),d[23],d[39]?d[40]=!1:d[40]=!0,d[40]?0:(d[39]?d[43]=!1:d[43]=!0,d[43]?d[44]=void 0:(d[47]=d[39].get("__typename"),d[39],d[47]==="XMSGStoryReplyExtras"?(d[49]=new c.Map(),d[52]="logging",d[50]=d[39].get(d[52]),d[39],d[50]?d[51]=!1:d[51]=!0,d[51]?0:(d[50]?d[53]=!1:d[53]=!0,d[53]?d[54]=void 0:(d[57]=new c.Map(),d[65]="story_author_fbid",d[58]=d[50].get(d[65]),d[50],d[58]!==void 0?d[57].set(d[65],d[58]):0,d[66]="camera_post_type",d[59]=d[50].get(d[66]),d[50],d[59]!==void 0?d[57].set(d[66],d[59]):0,d[67]="story_type",d[60]=d[50].get(d[67]),d[50],d[60]!==void 0?d[57].set(d[67],d[60]):0,d[68]="post_source",d[61]=d[50].get(d[68]),d[50],d[61]!==void 0?d[57].set(d[68],d[61]):0,d[69]="fb_post_type",d[62]=d[50].get(d[69]),d[50],d[62]!==void 0?d[57].set(d[69],d[62]):0,d[70]="conversation_starter_type",d[63]=d[50].get(d[70]),d[50],d[63]!==void 0?d[57].set(d[70],d[63]):0,d[71]="story_reply_type",d[64]=d[50].get(d[71]),d[50],d[64]!==void 0?d[57].set(d[71],d[64]):0,d[54]=d[57]),d[55]=d[54].keys(),d[56]=c.i64.of_int32(d[55].length),c.i64.neq(d[56],c.i64.cast([0,0]))?d[49].set(d[52],d[54]):0),d[48]=d[49]):(d[47]==="XMSGMarketplaceExtras"?(d[50]=new c.Map(),d[69]="listing_id",d[51]=d[39].get(d[69]),d[39],d[51]!==void 0?d[50].set(d[69],d[51]):0,d[70]="initial_clicked_component",d[52]=d[39].get(d[70]),d[39],d[52]!==void 0?d[50].set(d[70],d[52]):0,d[71]="initial_tracking",d[53]=d[39].get(d[71]),d[39],d[53]!==void 0?d[50].set(d[71],d[53]):0,d[72]="referral_surface",d[54]=d[39].get(d[72]),d[39],d[54]!==void 0?d[50].set(d[72],d[54]):0,d[73]="referral_story_type",d[55]=d[39].get(d[73]),d[39],d[55]!==void 0?d[50].set(d[73],d[55]):0,d[74]="referral_ui_component",d[56]=d[39].get(d[74]),d[39],d[56]!==void 0?d[50].set(d[74],d[56]):0,d[75]="surface",d[57]=d[39].get(d[75]),d[39],d[57]!==void 0?d[50].set(d[75],d[57]):0,d[76]="tracking",d[58]=d[39].get(d[76]),d[39],d[58]!==void 0?d[50].set(d[76],d[58]):0,d[77]="ui_component",d[59]=d[39].get(d[77]),d[39],d[59]!==void 0?d[50].set(d[77],d[59]):0,d[78]="ad_id",d[60]=d[39].get(d[78]),d[39],d[60]!==void 0?d[50].set(d[78],d[60]):0,d[79]="server_session_id",d[61]=d[39].get(d[79]),d[39],d[61]!==void 0?d[50].set(d[79],d[61]):0,d[80]="cf_page_id",d[62]=d[39].get(d[80]),d[39],d[62]!==void 0?d[50].set(d[80],d[62]):0,d[81]="live_shopping_video_id",d[63]=d[39].get(d[81]),d[39],d[63]!==void 0?d[50].set(d[81],d[63]):0,d[82]="logging_id",d[64]=d[39].get(d[82]),d[39],c.i64.neq(d[64],void 0)?d[50].set(d[82],d[64]):0,d[83]="photo_ids",d[65]=d[39].get(d[83]),d[39],d[65]?d[66]=!1:d[66]=!0,d[66]?0:d[50].set(d[83],d[65]),d[84]="is_customized_message",d[67]=d[39].get(d[84]),d[39],d[67]!==void 0?d[50].set(d[84],d[67]):0,d[85]="referral_code",d[68]=d[39].get(d[85]),d[39],d[68]!==void 0?d[50].set(d[85],d[68]):0,d[49]=d[50]):(d[47]==="XMSGClickToMessengerAdExtras"?(d[51]=new c.Map(),d[62]="encrypted_ads_token",d[52]=d[39].get(d[62]),d[39],d[52]!==void 0?d[51].set(d[62],d[52]):0,d[63]="product_type",d[53]=d[39].get(d[63]),d[39],d[53]!==void 0?d[51].set(d[63],d[53]):0,d[64]="post_id",d[54]=d[39].get(d[64]),d[39],d[54]!==void 0?d[51].set(d[64],d[54]):0,d[65]="ad_id",d[55]=d[39].get(d[65]),d[39],d[55]!==void 0?d[51].set(d[65],d[55]):0,d[66]="page_id",d[56]=d[39].get(d[66]),d[39],d[56]!==void 0?d[51].set(d[66],d[56]):0,d[67]="photo_id",d[57]=d[39].get(d[67]),d[39],d[57]!==void 0?d[51].set(d[67],d[57]):0,d[68]="photo_index",d[58]=d[39].get(d[68]),d[39],c.i64.neq(d[58],void 0)?d[51].set(d[68],d[58]):0,d[69]="fallback_url",d[59]=d[39].get(d[69]),d[39],d[59]!==void 0?d[51].set(d[69],d[59]):0,d[70]="product_id",d[60]=d[39].get(d[70]),d[39],d[60]!==void 0?d[51].set(d[70],d[60]):0,d[71]="user_id",d[61]=d[39].get(d[71]),d[39],d[61]!==void 0?d[51].set(d[71],d[61]):0,d[50]=d[51]):(d[47]==="XMSGZorroMessageExtras"?(d[52]=new c.Map(),d[54]="is_enabled",d[53]=d[39].get(d[54]),d[39],d[53]!==void 0?d[52].set(d[54],d[53]):0,d[51]=d[52]):(d[47]==="XMSGGenAISuggestedPromptExtras"?(d[53]=new c.Map(),d[56]="prompt_type",d[54]=d[39].get(d[56]),d[39],d[54]!==void 0?d[53].set(d[56],d[54]):0,d[57]="qpl_join_id",d[55]=d[39].get(d[57]),d[39],d[55]!==void 0?d[53].set(d[57],d[55]):0,d[52]=d[53]):(d[47]==="XMSGGenAIMultiModalExtras"?(d[54]=new c.Map(),d[58]="should_skip_genai_eval",d[55]=d[39].get(d[58]),d[39],d[55]!==void 0?d[54].set(d[58],d[55]):0,d[59]="associated_multimodal_message_id",d[56]=d[39].get(d[59]),d[39],d[56]!==void 0?d[54].set(d[59],d[56]):0,d[60]="qpl_join_id",d[57]=d[39].get(d[60]),d[39],d[57]!==void 0?d[54].set(d[60],d[57]):0,d[53]=d[54]):(d[47]==="XMSGGenAIFlashImagineExtras"?(d[55]=new c.Map(),d[58]="seed",d[56]=d[39].get(d[58]),d[39],c.i64.neq(d[56],void 0)?d[55].set(d[58],d[56]):0,d[59]="qpl_join_id",d[57]=d[39].get(d[59]),d[39],d[57]!==void 0?d[55].set(d[59],d[57]):0,d[54]=d[55]):(d[47]==="XMSGShareSheetExtras"?(d[56]=new c.Map(),d[58]="recipient_selection_session_id",d[57]=d[39].get(d[58]),d[39],d[57]!==void 0?d[56].set(d[58],d[57]):0,d[55]=d[56]):(d[47]==="XMSGGenAIAssistantAPIExtras"?(d[57]=new c.Map(),d[85]="referrer_session_id",d[58]=d[39].get(d[85]),d[39],d[58]!==void 0?d[57].set(d[85],d[58]):0,d[86]="thread_session_id",d[59]=d[39].get(d[86]),d[39],d[59]!==void 0?d[57].set(d[86],d[59]):0,d[87]="prompt_id",d[60]=d[39].get(d[87]),d[39],d[60]!==void 0?d[57].set(d[87],d[60]):0,d[88]="prompt_type",d[61]=d[39].get(d[88]),d[39],d[61]!==void 0?d[57].set(d[88],d[61]):0,d[89]="location_extras",d[62]=d[39].get(d[89]),d[39],d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[113]="has_previous_perm_prompt",d[110]=d[62].get(d[113]),d[62],d[110]!==void 0?d[109].set(d[113],d[110]):0,d[114]="latitude",d[111]=d[62].get(d[114]),d[62],d[111]!==void 0?d[109].set(d[114],d[111]):0,d[115]="longitude",d[112]=d[62].get(d[115]),d[62],d[112]!==void 0?d[109].set(d[115],d[112]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[89],d[106]):0),d[90]="qpl_join_id",d[64]=d[39].get(d[90]),d[39],d[64]!==void 0?d[57].set(d[90],d[64]):0,d[91]="meta_ai_prompt_type",d[65]=d[39].get(d[91]),d[39],d[65]!==void 0?d[57].set(d[91],d[65]):0,d[92]="is_subsequent_send",d[66]=d[39].get(d[92]),d[39],d[66]!==void 0?d[57].set(d[92],d[66]):0,d[93]="context_injection_type",d[67]=d[39].get(d[93]),d[39],d[67]!==void 0?d[57].set(d[93],d[67]):0,d[94]="context_injection_timestamp_ms",d[68]=d[39].get(d[94]),d[39],d[68]!==void 0?d[57].set(d[94],d[68]):0,d[95]="meta_ai_response_to_persist",d[69]=d[39].get(d[95]),d[39],d[69]?d[70]=!1:d[70]=!0,d[70]?0:(d[69]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[116]="text",d[110]=d[69].get(d[116]),d[69],d[110]!==void 0?d[109].set(d[116],d[110]):0,d[117]="bot_response_id",d[111]=d[69].get(d[117]),d[69],d[111]!==void 0?d[109].set(d[117],d[111]):0,d[118]="bot_request_id",d[112]=d[69].get(d[118]),d[69],d[112]!==void 0?d[109].set(d[118],d[112]):0,d[119]="external_search_params",d[113]=d[69].get(d[119]),d[69],d[113]?d[114]=!1:d[114]=!0,d[114]?0:(d[113]?d[121]=!1:d[121]=!0,d[121]?d[122]=void 0:(d[125]=new c.Map(),d[133]="search_result_uri",d[126]=d[113].get(d[133]),d[113],d[126]?d[127]=!1:d[127]=!0,d[127]?0:(d[138]=c.i64.of_int32(d[126].length),c.i64.neq(d[138],c.i64.cast([0,0]))?d[125].set(d[133],d[126]):0),d[134]="search_query",d[128]=d[113].get(d[134]),d[113],d[128]!==void 0?d[125].set(d[134],d[128]):0,d[135]="attribution_link",d[129]=d[113].get(d[135]),d[113],d[129]!==void 0?d[125].set(d[135],d[129]):0,d[136]="search_engine",d[130]=d[113].get(d[136]),d[113],d[130]!==void 0?d[125].set(d[136],d[130]):0,d[137]="references_title",d[131]=d[113].get(d[137]),d[113],d[131]?d[132]=!1:d[132]=!0,d[132]?0:(d[138]=c.i64.of_int32(d[131].length),c.i64.neq(d[138],c.i64.cast([0,0]))?d[125].set(d[137],d[131]):0),d[122]=d[125]),d[123]=d[122].keys(),d[124]=c.i64.of_int32(d[123].length),c.i64.neq(d[124],c.i64.cast([0,0]))?d[109].set(d[119],d[122]):0),d[120]="followup_prompt_text",d[115]=d[69].get(d[120]),d[69],d[115]!==void 0?d[109].set(d[120],d[115]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[95],d[106]):0),d[96]="gql_dark_test_qpl_join_id",d[71]=d[39].get(d[96]),d[39],d[71]!==void 0?d[57].set(d[96],d[71]):0,d[97]="gql_dark_test_client_start_time",d[72]=d[39].get(d[97]),d[39],d[72]!==void 0?d[57].set(d[97],d[72]):0,d[98]="prompt_context",d[73]=d[39].get(d[98]),d[39],d[73]?d[74]=!1:d[74]=!0,d[74]?0:(d[73]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[112]="context_token",d[110]=d[73].get(d[112]),d[73],d[110]!==void 0?d[109].set(d[112],d[110]):0,d[113]="context_token_type",d[111]=d[73].get(d[113]),d[73],c.i64.neq(d[111],void 0)?d[109].set(d[113],d[111]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[98],d[106]):0),d[99]="imagine_flash_extras",d[75]=d[39].get(d[99]),d[39],d[75]?d[76]=!1:d[76]=!0,d[76]?0:(d[75]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[112]="seed",d[110]=d[75].get(d[112]),d[75],c.i64.neq(d[110],void 0)?d[109].set(d[112],d[110]):0,d[113]="qpl_join_id",d[111]=d[75].get(d[113]),d[75],d[111]!==void 0?d[109].set(d[113],d[111]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[99],d[106]):0),d[100]="conversation_marker_id",d[77]=d[39].get(d[100]),d[39],d[77]!==void 0?d[57].set(d[100],d[77]):0,d[101]="multi_modal_extras",d[78]=d[39].get(d[101]),d[39],d[78]?d[79]=!1:d[79]=!0,d[79]?0:(d[78]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[113]="should_skip_genai_eval",d[110]=d[78].get(d[113]),d[78],d[110]!==void 0?d[109].set(d[113],d[110]):0,d[114]="associated_multimodal_message_id",d[111]=d[78].get(d[114]),d[78],d[111]!==void 0?d[109].set(d[114],d[111]):0,d[115]="qpl_join_id",d[112]=d[78].get(d[115]),d[78],d[112]!==void 0?d[109].set(d[115],d[112]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[101],d[106]):0),d[102]="ads_extras",d[80]=d[39].get(d[102]),d[39],d[80]?d[81]=!1:d[81]=!0,d[81]?0:(d[80]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[111]="context",d[110]=d[80].get(d[111]),d[80],d[110]!==void 0?d[109].set(d[111],d[110]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[102],d[106]):0),d[103]="suggested_prompt_extras",d[82]=d[39].get(d[103]),d[39],d[82]?d[83]=!1:d[83]=!0,d[83]?0:(d[82]?d[105]=!1:d[105]=!0,d[105]?d[106]=void 0:(d[109]=new c.Map(),d[112]="prompt_type",d[110]=d[82].get(d[112]),d[82],d[110]!==void 0?d[109].set(d[112],d[110]):0,d[113]="qpl_join_id",d[111]=d[82].get(d[113]),d[82],d[111]!==void 0?d[109].set(d[113],d[111]):0,d[106]=d[109]),d[107]=d[106].keys(),d[108]=c.i64.of_int32(d[107].length),c.i64.neq(d[108],c.i64.cast([0,0]))?d[57].set(d[103],d[106]):0),d[104]="disable_server_mqtt_typing_indicator",d[84]=d[39].get(d[104]),d[39],d[84]!==void 0?d[57].set(d[104],d[84]):0,d[56]=d[57]):(d[47]==="XMSGProductHighlightExtras"?(d[58]=new c.Map(),d[61]="product_highlight_type",d[59]=d[39].get(d[61]),d[39],d[59]!==void 0?d[58].set(d[61],d[59]):0,d[62]="conversation_marker",d[60]=d[39].get(d[62]),d[39],d[60]!==void 0?d[58].set(d[62],d[60]):0,d[57]=d[58]):(d[47]==="XMSGMagicMessengerExtras"?(d[59]=new c.Map(),d[61]="is_magic_thread",d[60]=d[39].get(d[61]),d[39],d[60]!==void 0?d[59].set(d[61],d[60]):0,d[58]=d[59]):(d[47]==="XMSGAdsAIExtras"?(d[60]=new c.Map(),d[62]="context",d[61]=d[39].get(d[62]),d[39],d[61]!==void 0?d[60].set(d[62],d[61]):0,d[59]=d[60]):(d[47]==="XMSGBizappExtras"?(d[61]=new c.Map(),d[64]="message_source",d[62]=d[39].get(d[64]),d[39],d[62]!==void 0?d[61].set(d[64],d[62]):0,d[65]="message_trigger",d[63]=d[39].get(d[65]),d[39],d[63]!==void 0?d[61].set(d[65],d[63]):0,d[60]=d[61]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGMessageSendProductExtrasUnion: ","",d[47]].join("")),d[60]=d[39]),d[59]=d[60]),d[58]=d[59]),d[57]=d[58]),d[56]=d[57]),d[55]=d[56]),d[54]=d[55]),d[53]=d[54]),d[52]=d[53]),d[51]=d[52]),d[50]=d[51]),d[49]=d[50]),d[48]=d[49]),d[48].set("__typename",d[47]),d[44]=d[48]),d[45]=d[44].keys(),d[46]=c.i64.of_int32(d[45].length),c.i64.neq(d[46],c.i64.cast([0,0]))?d[37].set(d[42],d[44]):0),d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[30],d[34]):0),d[31]="logging_metadata",d[25]=d[21].get(d[31]),d[21],d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve():c.sequence([function(a){return d[25]?d[33]=!1:d[33]=!0,d[33]?c.resolve(d[34]=void 0):c.sequence([function(a){return d[37]=new c.Map(),d[42]="feature_tags",d[38]=d[25].get(d[42]),d[25],d[38]?d[39]=!1:d[39]=!0,d[39]?0:(d[44]=c.i64.of_int32(d[38].length),c.i64.neq(d[44],c.i64.cast([0,0]))?d[37].set(d[42],d[38]):0),d[43]="content_model",d[40]=d[25].get(d[43]),d[25],d[40]?d[41]=!1:d[41]=!0,d[41]?c.resolve():c.sequence([function(a){return d[40]?d[44]=!1:d[44]=!0,d[44]?c.resolve(d[45]=void 0):c.sequence([function(a){return d[48]=new c.Map(),d[53]="containing_post",d[49]=d[40].get(d[53]),d[40],d[49]?d[50]=!1:d[50]=!0,d[50]?c.resolve():c.sequence([function(a){return d[49]?d[55]=!1:d[55]=!0,d[55]?c.resolve(d[56]=void 0):c.sequence([function(a){return d[59]=new c.Map(),d[67]="key_type",d[60]=d[49].get(d[67]),d[49],d[60]!==void 0?d[59].set(d[67],d[60]):0,d[68]="fb_post_type",d[61]=d[49].get(d[68]),d[49],d[61]?d[62]=!1:d[62]=!0,d[62]?0:(d[71]=c.i64.of_int32(d[61].length),c.i64.neq(d[71],c.i64.cast([0,0]))?d[59].set(d[68],d[61]):0),d[69]="photos",d[63]=d[49].get(d[69]),d[49],d[63]?d[64]=!1:d[64]=!0,d[64]?c.resolve():c.sequence([function(a){return d[63]?d[71]=!1:d[71]=!0,d[71]?c.resolve(d[72]=void 0):c.sequence([function(a){return d[74]=c.createArray(),d[75]=c.i64.of_int32(d[63].length),c.i64.gt(d[75],c.i64.cast([0,0]))?c.loopAsync(d[75],function(a){return d[76]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[63],d[76]).then(function(a){return a=a,d[77]=a[0],d[78]=a[1],a})},function(a){return d[79]=new c.Map(),d[81]="key_type",d[80]=d[77].get(d[81]),d[77],d[80]!==void 0?d[79].set(d[81],d[80]):0,d[82]=(d[74].push(d[79]),d[74])}])}):c.resolve()},function(a){return d[72]=d[74]}])},function(a){return d[73]=c.i64.of_int32(d[72].length),c.i64.neq(d[73],c.i64.cast([0,0]))?d[59].set(d[69],d[72]):0}])},function(a){return d[70]="videos",d[65]=d[49].get(d[70]),d[49],d[65]?d[66]=!1:d[66]=!0,d[66]?c.resolve():c.sequence([function(a){return d[65]?d[71]=!1:d[71]=!0,d[71]?c.resolve(d[72]=void 0):c.sequence([function(a){return d[74]=c.createArray(),d[75]=c.i64.of_int32(d[65].length),c.i64.gt(d[75],c.i64.cast([0,0]))?c.loopAsync(d[75],function(a){return d[76]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[65],d[76]).then(function(a){return a=a,d[77]=a[0],d[78]=a[1],a})},function(a){return d[79]=new c.Map(),d[81]="key_type",d[80]=d[77].get(d[81]),d[77],d[80]!==void 0?d[79].set(d[81],d[80]):0,d[82]=(d[74].push(d[79]),d[74])}])}):c.resolve()},function(a){return d[72]=d[74]}])},function(a){return d[73]=c.i64.of_int32(d[72].length),c.i64.neq(d[73],c.i64.cast([0,0]))?d[59].set(d[70],d[72]):0}])},function(a){return d[56]=d[59]}])},function(a){return d[57]=d[56].keys(),d[58]=c.i64.of_int32(d[57].length),c.i64.neq(d[58],c.i64.cast([0,0]))?d[48].set(d[53],d[56]):0}])},function(a){return d[54]="metadata",d[51]=d[40].get(d[54]),d[40],d[51]?d[52]=!1:d[52]=!0,d[52]?0:(d[51]?d[55]=!1:d[55]=!0,d[55]?d[56]=void 0:(d[59]=d[51].get("__typename"),d[51],d[59]==="XMSGGroupsContentLoggingMetadata"?(d[61]=new c.Map(),d[63]="num_members",d[62]=d[51].get(d[63]),d[51],c.i64.neq(d[62],void 0)?d[61].set(d[63],d[62]):0,d[60]=d[61]):(d[59]==="XMSGStoriesContentLoggingMetadata"?(d[62]=new c.Map(),d[67]="author",d[63]=d[51].get(d[67]),d[51],d[63]?d[64]=!1:d[64]=!0,d[64]?0:(d[63]?d[70]=!1:d[70]=!0,d[70]?d[71]=void 0:(d[74]=new c.Map(),d[77]="profile",d[75]=d[63].get(d[77]),d[63],d[75]?d[76]=!1:d[76]=!0,d[76]?0:(d[75]?d[78]=!1:d[78]=!0,d[78]?d[79]=void 0:(d[82]=new c.Map(),d[84]="id",d[83]=d[75].get(d[84]),d[75],d[83]!==void 0?d[82].set(d[84],d[83]):0,d[79]=d[82]),d[80]=d[79].keys(),d[81]=c.i64.of_int32(d[80].length),c.i64.neq(d[81],c.i64.cast([0,0]))?d[74].set(d[77],d[79]):0),d[71]=d[74]),d[72]=d[71].keys(),d[73]=c.i64.of_int32(d[72].length),c.i64.neq(d[73],c.i64.cast([0,0]))?d[62].set(d[67],d[71]):0),d[68]="post_source",d[65]=d[51].get(d[68]),d[51],d[65]!==void 0?d[62].set(d[68],d[65]):0,d[69]="story_type",d[66]=d[51].get(d[69]),d[51],d[66]!==void 0?d[62].set(d[69],d[66]):0,d[61]=d[62]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[59]].join("")),d[61]=d[51]),d[60]=d[61]),d[60].set("__typename",d[59]),d[56]=d[60]),d[57]=d[56].keys(),d[58]=c.i64.of_int32(d[57].length),c.i64.neq(d[58],c.i64.cast([0,0]))?d[48].set(d[54],d[56]):0),d[45]=d[48]}])},function(a){return d[46]=d[45].keys(),d[47]=c.i64.of_int32(d[46].length),c.i64.neq(d[47],c.i64.cast([0,0]))?d[37].set(d[43],d[45]):0}])},function(a){return d[34]=d[37]}])},function(a){return d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[31],d[34]):0}])},function(a){return d[32]="send_instance_metadata",d[27]=d[21].get(d[32]),d[21],d[27]?d[28]=!1:d[28]=!0,d[28]?0:(d[27]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[40]="send_instance_id",d[38]=d[27].get(d[40]),d[27],d[38]!==void 0?d[37].set(d[40],d[38]):0,d[41]="send_instance_group_size",d[39]=d[27].get(d[41]),d[27],c.i64.neq(d[39],void 0)?d[37].set(d[41],d[39]):0,d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[32],d[34]):0),d[29]=c.toJSON(d[22]),d[10]=d[29]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[13].set("attachment_fbid",void 0),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[13],d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure";e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSOptimisticUpsertReaction")(b.threadKey,b.timestampMs,b.messageId,b.actorId,b.reaction,b.sendAttribution,b.pluginType,a)}g["default"]=a}),98);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[18],d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[26]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[27]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[26],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,252]))?d[25]=!1:(c.i64.eq(d[26],c.i64.cast([0,0]))?d[28]=!c.i64.eq(c.i64.and_(d[27],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,1]))?d[29]=!c.i64.eq(c.i64.and_(d[27],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,2]))?d[30]=!c.i64.eq(c.i64.and_(d[27],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,3]))?d[31]=!c.i64.eq(c.i64.and_(d[27],d[24]),c.i64.cast([0,0])):d[31]=!1,d[30]=d[31]),d[29]=d[30]),d[28]=d[29]),d[25]=d[28]),d[20]===d[25]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[7],d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure";e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSOptimisticUpsertReactionV2")(b.actorId,b.threadId,b.messageId,b.messageTimestamp,b.reactionFbid,b.currentCount,b.viewerIsReactor,b.reactionStyle,b.operation,b.reactionLiteral,a)}g["default"]=a}),98);
__d("LSPinnedMessageState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_PINNED:0,PINNED:1,PINNED_AND_FEATURED:2});f["default"]=a}),66);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bot_feedback_kind",a[0]),d[0].set("bot_response_id",a[2]),d[0].set("feedback_kind_type",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",c.i64.cast([0,756]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(b){return c.db.table(315).fetch([[[a[2]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,0]):(b=a.item,d[2]=b.feedbackSubmissionStatus)})},function(b){return c.i64.eq(d[2],c.i64.cast([0,0]))?c.db.table(315).add({botResponseId:a[2],feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]}):c.forEach(c.db.table(315).fetch([[[a[2]]]]),function(b){var d=b.update;b.item;return d({feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure";e.exports=a}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSSubmitGenAIBotFeedback")(b.botFeedbackKind,b.feedbackKindType,b.botResponseId,a)}g["default"]=a}),98);
__d("MAWAudioUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var d=URL.createObjectURL(a);return new(h||(h=b("Promise")))(function(a,b){var e=new Audio();e.setAttribute("crossOrigin","anonymous");e.addEventListener("loadedmetadata",function(c){c=c.currentTarget;if(c instanceof HTMLAudioElement){c=c.duration;a(Math.ceil(c))}else b("EventTarget returned for event should be HTMLAudioElement")});e.src=d;e.onabort=function(){b(function(){throw c("err")("Error loading audio from provided URL")})};e.onerror=function(){b(function(){throw c("err")("Wrong blob type")})}})}g.getAudioDurationInSeconds=a}),98);
__d("MAWAudioPreProcess",["MAWAudioUtils","Promise","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic audio preprocess"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start audio preprocess"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MAWAudioPreProcess"]);function c(a){k.LOG(j());return d("MAWAudioUtils").getAudioDurationInSeconds(a).then(function(c){return(h||(h=b("Promise"))).resolve({durations:c,file:a,isPtt:!0,type:"audio"})})}function e(c){var e=a.URL.createObjectURL(c);k.LOG(i());return d("MAWAudioUtils").getAudioDurationInSeconds(c).then(function(a){return(h||(h=b("Promise"))).resolve({durations:a,file:c,isPtt:!0,type:"audio",url:e})})}g.audioPreprocess=c;g.optimisticAudioPreprocess=e}),98);
__d("MAWMediaDownloadStatusUIStateType",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;switch(a){case"non_retryable_error":case"non_retryable_error_with_preview":case"retryable_error":case"retryable_error_with_preview":return!0;default:return!1}}function b(a){if(a==null)return!1;switch(a){case"retryable_error":case"retryable_error_with_preview":return!0;default:return!1}}f.isErrorState=a;f.isRetryableErrorState=b}),66);
__d("MAWSendVideoToWorker",["MAWMediaWorkerResource","Promise","WALogger","WebWorker"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clean up media worker"]);i=function(){return a};return a}var j=k();function a(a){var c;return new(h||(h=b("Promise")))(function(b){c=j&&l(j)?k():j,c.setMessageHandler(function(a){b(a)}).execute(),c.postMessage(a)})["finally"](function(){c&&(d("WALogger").LOG(i()),c.terminate(),(!j||!j.isCurrentState("constructed"))&&(j=k()))})}function k(){return new(c("WebWorker"))(c("MAWMediaWorkerResource")).setAllowCrossPageTransition(!0)}function l(a){return a.isCurrentState("preparing")||a.isCurrentState("executing")}g.sendVideoMessageToWorker=a}),98);
__d("MAWVideoPreProcess",["MAWMediaPreProcessQpl","MAWSendVideoToWorker","MAWVideoUtils","Promise","WAMediaWasmWorkerClient","WATagsLogger","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processVideoThroughWasm error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through wasm, file name: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got error! ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair rejected file (",")"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got parsing error! ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["trouble parsing file "," (fossil ",") ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through asm.js, file name: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to preprocess video: ",""]);p=function(){return a};return a}var q=["video/x-ms-wmv","video/x-msvideo","video/avi","video/x-flv","video/ogg","video/mpeg"],r=d("WATagsLogger").TAGS(["MAWVideoPreProcess"]),s=typeof self.BigInt==="function";function e(a,c){return u(a,c).then(function(a){return(h||(h=b("Promise"))).all([a,d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a)])}).then(function(a){var c=a[0];a=a[1];return(h||(h=b("Promise"))).resolve({file:c,thumbnailUrlAndSpec:a,type:"video"})})}function f(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=(yield d("MAWVideoUtils").getVideoThumbnailSpec(c)),f=a.URL.createObjectURL(c);return(h||(h=b("Promise"))).resolve({file:c,thumbnailSpec:e,type:"video",url:f})});return t.apply(this,arguments)}function u(a,b){var c=s,e=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("video",a);e.addAnnotations({bool:{wamedia_wasm_enabled:c},"int":{total_number_of_files:(b=b)!=null?b:1}});b=c?v(a,e):x(a);return b.then(function(a){e.endSuccess({"int":{compressed_file_size:a.size}});return a})["catch"](function(b){r.ERROR(p(),b.toString());e.endFail("unable_to_process_video",{string:{preprocessError:b.toString()}});return a})}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){r.DEV(j(),a.name);var e=(yield a.arrayBuffer()),f=c("gkx")("7697");f=f?yield d("WAMediaWasmWorkerClient").mp4RepairMuxInWorker({eventFlow:b,input:new Uint8Array(e)}):yield d("WAMediaWasmWorkerClient").mp4CheckAndRepairInWorker({eventFlow:b,input:new Uint8Array(e)});if(!f.success){r.ERROR(i(),f.error);throw c("err")("processVideoThroughWasm error: "+f.error)}b=new File([f.value],a.name,{type:"video/mp4"});return b});return w.apply(this,arguments)}function x(a){r.DEV(o(),a.name);return y(a).then(function(d){if(!d)throw c("err")("invalid file");d=new File([d.file],a.name,{type:d.file.type});return(h||(h=b("Promise"))).resolve(d)})}function y(a){return d("MAWSendVideoToWorker").sendVideoMessageToWorker({asGif:!1,file:a,type:"prep"}).then(function(a){var b=a.error,c=a.file,d=a.filename,e=a.result;a=a.type;switch(a){case"result":return e;case"parsingError":r.ERROR(n(),c,d,String(b));c&&r.ERROR(m(),String(b));r.ERROR(l(),String(b));return void 0}})["catch"](function(a){r.ERROR(k(),String(a));return void 0})}function z(a){return!d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!1:!q.includes(a)}g.videoPreprocess=e;g.optimisticVideoPreprocess=f;g.processVideoThroughWasm=v;g.processVideoThroughAsmJs=x;g.isSupportedVideoFileType=z}),98);
__d("MAWMediaPreprocess",["MAWAudioPreProcess","MAWDocumentPreProcess","MAWImagePreProcess","MAWSupportedDocumentTypes","MAWVideoPreProcess","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic mediaPreprocess, file name: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start mediaPreprocess, file name: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["MAWMediaPreprocess"]);function a(a,b){j.DEV(i(),a.name);return k(a,function(a){return d("MAWImagePreProcess").imagePreprocess(a,!1,b)},function(a){return d("MAWVideoPreProcess").videoPreprocess(a,b)},d("MAWAudioPreProcess").audioPreprocess,d("MAWDocumentPreProcess").documentPreprocess)}function b(a){j.DEV(h(),a.name);return k(a,d("MAWImagePreProcess").optimisticImagePreprocess,d("MAWVideoPreProcess").optimisticVideoPreprocess,d("MAWAudioPreProcess").optimisticAudioPreprocess,d("MAWDocumentPreProcess").optimisticDocumentPreprocess)}function k(a,b,c,e,f){if(a.size===0)return Promise.reject("Unsupported file type");if(d("MAWImagePreProcess").isSupportedImageFileType(a.type))return b(a);if(d("MAWVideoPreProcess").isSupportedVideoFileType(a.type))return c(a);if(a.type.startsWith("audio/"))return e(a);return d("MAWSupportedDocumentTypes").isAllowedType(a.name)?f(a):Promise.reject("Unsupported file type")}g.mediaPreprocess=a;g.optimisticMediaPreprocess=b}),98);
__d("MWMediaManagerTypes",["MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case"animated_image":return c("MessagingAttachmentType").ANIMATED_IMAGE;case"image":return c("MessagingAttachmentType").IMAGE;case"video":return c("MessagingAttachmentType").VIDEO;case"audio":return c("MessagingAttachmentType").AUDIO;case"document":return c("MessagingAttachmentType").FILE;default:return null}}g.getMessagingAttachmentTypeFromMediaMetadataAttachmentType=a}),98);
__d("MAWMediaManagerUtils",["FBLogger","MAWBridgeFireAndForget","MAWMediaPreprocess","MAWMediaUtils","MAWMiActOnActThreadReady","MWMediaManagerTypes","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a){return(h||(h=b("Promise"))).all(a.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=c[0];c=c[1];var f=d("MAWMediaPreprocess").mediaPreprocess(e,a.length),g=(yield d("MAWMediaPreprocess").optimisticMediaPreprocess(e));i.set(c,{optimisticMedia:g,processedMediaPromise:f});f=d("MWMediaManagerTypes").getMessagingAttachmentTypeFromMediaMetadataAttachmentType(g.type);e={attachmentType:(f=f)!=null?f:void 0,file:e,offlineAttachmentId:c,previewHeight:(e=(f=g.imageSpec)==null?void 0:f.height)!=null?e:void 0,previewWidth:(f=(c=g.imageSpec)==null?void 0:c.width)!=null?f:void 0};return(h||(h=b("Promise"))).resolve(e)});return function(a){return c.apply(this,arguments)}}()))}function e(a,e,f){c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e,"MAWMediaManagerUtils",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=f.reduce(function(a,b){b=(b=i.get(b.offlineAttachmentId))==null?void 0:b.processedMediaPromise;b!=null&&a.push(b);return a},[]);a=(yield (h||(h=b("Promise"))).all(a));a.forEach(function(a){switch(a.type){case"image":case"animated_image":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"video":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"audio":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:null});case"document":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:null});default:c("FBLogger")("messenger_web_media").mustfix("MAW Optimistic upload media: unknown media attachment file type: "+a.type)}});return h.resolve()});return function(b,c){return a.apply(this,arguments)}}()))}g.MAWMediaManagerAttachmentsV2=i;g.preprocessV2=a;g.upload=e}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useMWLSDefaultThreadSource",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(2),b=c("useLSMessagingSource")(),e;a[0]!==b?(e=function(a){return d("LSThreadAttributionTypeUtil").getSource(a,b)},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","react","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).c;function m(a,b,e,g,h,i){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(j||(j=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:i,reactionStyle:j.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}function n(a,b,c,d,e,f,g){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,i,k){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(j||(j=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:i,reactionStyle:j.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")});return o.apply(this,arguments)}function p(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?m(a,b,e,f,c.count,g):m(a,b,e,f,(k||(k=d("I64"))).zero,g)}))}function a(a){var e=l(7),g=(h||(h=c("useReStore")))(),i=d("MWPActor.react").useActor(),j=c("useMWLSDefaultThreadSource")(),m=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey),o,q;e[0]!==g||e[1]!==a||e[2]!==m||e[3]!==i||e[4]!==j?(o=function(e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===e||a.reactionLiteralVariant16===e})));if(h!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!m||(k||(k=d("I64"))).equal(a.reactionFbid,h.reactionFbid))&&a.viewerIsReactor})));if(b==null)return p(g,i,a,h.reactionFbid,e);var l=(k||(k=d("I64"))).equal(b.reactionFbid,h.reactionFbid);(!m||l)&&(yield n(g,i,a,b.count,b.reactionFbid,e,m));l||(yield p(g,i,a,h.reactionFbid,e))}else c("FBLogger")("messenger_web_product").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return g.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:i,messageId:a.messageId,reaction:e,sendAttribution:j(a.threadKey),threadKey:a.threadKey,timestampMs:(k||(k=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":226")})())},q=[g,a,m,i,j],e[0]=g,e[1]=a,e[2]=m,e[3]=i,e[4]=j,e[5]=o,e[6]=q):(o=e[5],q=e[6]);return d("Int64Hooks").useCallbackInt64(o,q)}g["default"]=a}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","MAWODSProxy","MWPActor.react","WAOdsEnums","cr:9778","promiseDone","requireDeferred","useIsSecureMessage","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function a(a,e,f){var g,k=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=(g=b("cr:9778")==null?void 0:b("cr:9778").useSendOrRemoveReaction(a.threadKey,(h||(h=d("I64"))).to_string(a.senderId)))!=null?g:null,n=c("useIsSecureMessage")(k,a,{fallbackIsSecure:e}),o=c("useMWPSendOrUnsendReaction")(a);return d("Int64Hooks").useMemoInt64(function(){return function(b,g,h){if(n&&m!==null)m(b,g),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"post-cutover_msg"});else{e&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"pre-cutover_msg"});o((b=g)!=null?b:"")}j.onReady(function(b){return c("promiseDone")(b.log(k,a.messageId,a.threadKey,f,h,void 0,void 0,void 0,a.senderId,void 0,l))})}},[n,m,e,o,k,a.messageId,a.threadKey,a.senderId,f,l])}g.useSendOrRemoveReaction=a}),98);
__d("MWMessageActionButton.react",["BaseTheme.react","MWPThemeCSSProvider.react","MWXCircleButton.react","MWXTooltip.react","MessengerWebUXLogger","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.c,k={dark:{},light:{},type:"VARIABLES"},l={dark:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},light:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},type:"VARIABLES"};e=i.forwardRef(a);function a(a,b){var e=j(22),f,g,h,m;e[0]!==a?(h=a.label,f=a.loggingEvent,g=a.onPress,m=babelHelpers.objectWithoutPropertiesLoose(a,["label","loggingEvent","onPress"]),e[0]=a,e[1]=f,e[2]=g,e[3]=h,e[4]=m):(f=e[1],g=e[2],h=e[3],m=e[4]);var n=c("MessengerWebUXLogger").useInteractionLogger();e[5]!==g||e[6]!==f||e[7]!==n?(a=function(a){g==null?void 0:g(a),f&&(n==null?void 0:n(f))},e[5]=g,e[6]=f,e[7]=n,e[8]=a):a=e[8];a=a;var o=c("useMWPThreadTheme")(),p=o.backgroundGradientColors;o=o.threadTheme;o=d("MWPThemeCSSProvider.react").useIsThemeV2()&&(Boolean(o.backgroundUrl)||p.length>0);p=o?l:k;var q=o?"primary":"secondary";o=o?"overlay":"deemphasized";var r;e[9]!==q||e[10]!==h||e[11]!==a||e[12]!==b||e[13]!==o||e[14]!==m?(r=i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({color:q,label:h,onPress:a,ref:b,size:28,type:o},m)),e[9]=q,e[10]=h,e[11]=a,e[12]=b,e[13]=o,e[14]=m,e[15]=r):r=e[15];e[16]!==p||e[17]!==r?(q=i.jsx(c("BaseTheme.react"),{config:p,children:r}),e[16]=p,e[17]=r,e[18]=q):q=e[18];e[19]!==h||e[20]!==q?(a=i.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:h,children:q}),e[19]=h,e[20]=q,e[21]=a):a=e[21];return a}f=e;g["default"]=f}),98);
__d("MWXIconThread",["MWXSvgIcon","SVGIcon","cr:9328","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9328")),c("gkx")("23219"));g["default"]=a}),98);
__d("SubthreadCreationStrings.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("__JHASH___O5rdp7xXii__JHASH__");b=h._("__JHASH__q-3Q4t45N1___JHASH__");g.createSubthreadLabel=a;g.viewSubthreadLabel=b}),226);
__d("threadCreationUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return(h||(h=d("I64"))).equal(a.creationStatus,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.creationStatusEquals=a}),98);
__d("MWCMSubthreadChatTabContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=c.c,l=e({pushSubthreadViewPage:null});function a(){return j(l)}function b(a){var b=k(5),c=a.children;a=a.pushSubthreadViewPage;var d;b[0]!==a?(d={pushSubthreadViewPage:a},b[0]=a,b[1]=d):d=b[1];a=d;d=a;b[2]!==d||b[3]!==c?(a=i.jsx(l.Provider,{value:d,children:c}),b[2]=d,b[3]=c,b[4]=a):a=b[4];return a}g.useSubthreadChatTabContext=a;g.MWCMSubthreadChatTabContextProvider=b}),98);
__d("MWCMSubthreadsInboxFocusContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=c.useState,l=c.c,m=e({isSubthreadFocused:!1,setIsSubthreadFocused:function(){}});function a(){return j(m)}function b(a){var b=l(5);a=a.children;var c=k(!1),d=c[0];c=c[1];b[0]!==d?(c={isSubthreadFocused:d,setIsSubthreadFocused:c},b[0]=d,b[1]=c):c=b[1];d=c;c=d;b[2]!==c||b[3]!==a?(d=i.jsx(m.Provider,{value:c,children:a}),b[2]=c,b[3]=a,b[4]=d):d=b[4];return d}g.useIsSubthreadFocusedContext=a;g.MWCMIsSubthreadFocusedContextProvider=b}),98);
__d("useMWPClearConversationSearch",["LSClearMessageSearchTableStoredProcedure","LSFactory","LSIntEnum","LSMessageSearchType","MWPConversationSearchContext.react","MWPVisibleMessageContext.react","asyncToGeneratorRuntime","nullthrows","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");e.useCallback;var k=e.useContext,l=e.c;function a(){var a=l(7),e=k(d("MWPConversationSearchContext.react").context),g;a[0]!==e?(g=c("nullthrows")(e),a[0]=e,a[1]=g):g=a[1];e=g;var j=e.setNavigation,m=e.setSearch;g=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var n=g.setVisibleMessage,o=(h||(h=c("useReStore")))();a[2]!==m||a[3]!==j||a[4]!==n||a[5]!==o?(e=function(a){var e;e=(e=a==null?void 0:a.shouldResetNavigation)!=null?e:!0;var g=(a=a==null?void 0:a.shouldClearThreadSearch)!=null?a:!0;m();e&&j();n(function(a){return(a==null?void 0:a.source)==="Search"?null:a});c("promiseDone")(o.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSFactory")(a);yield c("LSClearMessageSearchTableStoredProcedure")(a,{type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)});g&&(yield c("LSClearMessageSearchTableStoredProcedure")(a,{type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":53"))},a[2]=m,a[3]=j,a[4]=n,a[5]=o,a[6]=e):e=a[6];return e}g["default"]=a}),98);
__d("useMWPCloseConversationSearchSession",["MWPConversationSearchContext.react","MWPConversationSearchLogger","nullthrows","react","useMWPClearConversationSearch"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext,j=b.c;function a(){var a=j(5),b=c("useMWPClearConversationSearch")(),e=i(d("MWPConversationSearchContext.react").context),f;a[0]!==e?(f=c("nullthrows")(e),a[0]=e,a[1]=f):f=a[1];e=f;var g=e.setIsConversationSearchVisible;a[2]!==g||a[3]!==b?(f=function(a){g(!1),b(a),c("MWPConversationSearchLogger").logMessageSearchEnd()},a[2]=g,a[3]=b,a[4]=f):f=a[4];return f}g["default"]=a}),98);
__d("MWInboxInfoPanelContext.react",["Int64Hooks","MWInboxPersistedUIState","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","cr:124","emptyFunction","gkx","react","useEmptyFunction","useMWPCloseConversationSearchSession"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.createContext,l=j.useCallback,m=j.useContext,n=j.useRef,o=j.useState,p=(j=b("cr:124"))!=null?j:c("useEmptyFunction"),q=k({currentSubthreadView:null,isOnMemberRequestsPageRef:{current:!1},pushMemberRequestsPage:c("emptyFunction"),setCurrentSubthreadView:c("emptyFunction"),setPushMemberRequestsPage:c("emptyFunction"),setShouldNavToMemberRequests:c("emptyFunction"),setShowSubthreadList:c("emptyFunction"),setSubthreadKey:c("emptyFunction"),setThreadInfoVisible:c("emptyFunction"),shouldNavToMemberRequests:!1,sourceIsSubthreadNav:{current:!1},subthreadKey:null,threadInfoVisible:!0});function a(){return m(q)}function e(a){a=a.children;var b=d("MWInboxPersistedUIState").usePersistedUIState(!0,"__MWInboxDetail.info__"),e=b[0],f=b[1],g=n(!1);b=o(null);var h=b[0],j=b[1],k=g.current,r=n(c("emptyFunction")),s=r.current,t=n(!1),u=n(!1);b=o(null);var v=b[0],w=b[1],x=c("useMWPCloseConversationSearchSession")();b=l(function(){f(!1),j(null),w(null)},[f]);p(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL,b);b=m(c("MWResponsiveLayoutContext.react"));var y=b.popCard,z=b.pushCard,A=l(function(a){if(c("gkx")("24056")){a=Boolean(a)===!1?y:z;a(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)}},[z,y]),B=l(function(a){a?(w(null),j(null)):x({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),f(a),A(a)},[f,x,A]),C=l(function(a){f(!1),j(a),A(a)},[f,A]),D=l(function(a){g.current=a},[]),E=l(function(a,b){b===void 0&&(b=!1),a&&(f(!1),x({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),j(null)),w(a?"subthreadList":null),u.current=a&&b,A(a)},[f,A,x]),F=l(function(a){r.current=a},[]);b=d("Int64Hooks").useMemoInt64(function(){return{currentSubthreadView:v,isOnMemberRequestsPageRef:t,pushMemberRequestsPage:s,setCurrentSubthreadView:w,setPushMemberRequestsPage:F,setShouldNavToMemberRequests:D,setShowSubthreadList:E,setSubthreadKey:C,setThreadInfoVisible:B,shouldNavToMemberRequests:k,sourceIsSubthreadNav:u,subthreadKey:h,threadInfoVisible:e}},[e,F,D,E,C,s,B,k,v,h]);return i.jsx(q.Provider,{value:b,children:a})}e.displayName=e.name+" [from "+f.id+"]";g.useMWInboxInfoPanelContext=a;g.MWInboxInfoPanelProvider=e}),98);
__d("useOpenSubthreadView",["GroupsCometChatsEngagementLogger","I64","MWCMSubthreadChatTabContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxInfoPanelContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(){var a=j(5),b=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),c=b.setCurrentSubthreadView,e=b.setSubthreadKey;b=(b=d("MWCMSubthreadChatTabContext.react").useSubthreadChatTabContext())!=null?b:{};var f=b.pushSubthreadViewPage;b=d("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext();var g=b.setIsSubthreadFocused;a[0]!==f||a[1]!==c||a[2]!==e||a[3]!==g?(b=function(a,b){b=b===void 0?!1:b;d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_chat_tab:f!=null?"1":"0",is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:b===!0?"subthread_creation":"subthread_xma",surface:"subthread_view",thread_id:(i||(i=d("I64"))).to_string(a)});f!=null?f==null?void 0:f(a):(c("subthreadView"),e(a),g(!0))},a[0]=f,a[1]=c,a[2]=e,a[3]=g,a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("useMWCMCreateSubthread",["fbt","FBLogger","Int64Hooks","LSCommunityThreadCreationStatus","LSCreateCommunitySubThreadStoredProcedure","LSFactory","LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","threadCreationUtils","useCommunityFolder","useMWXPushErrorToast","useOpenSubthreadView","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;e=j||d("react");var k=e.useEffect,l=e.useRef,m=e.useState;function a(a){var e=(i||(i=c("useReStore")))(),g=d("MWLSThread").useThreadExn(a.threadKey),j=c("useCommunityFolder")(g),n=l(c("emptyFunction")),o=c("useMWXPushErrorToast")(),p=m(!1),q=p[0],r=p[1],s=c("useOpenSubthreadView")(),t=d("LSThreadBitOffset").has(206,g);k(function(){return function(){n==null?void 0:n.current()}},[]);p=d("Int64Hooks").useCallbackInt64(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j==null)return;var b=(yield e.runInTransaction(function(b){return c("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"readwrite",void 0,void 0,f.id+":65"));b=b[0];s(b,!0)}),[e,j,a.messageId,a.threadKey,s]);g=d("Int64Hooks").useCallbackInt64(function(){if(t)return;var b=function(a){a=a[0];if(a==null)return g();var b=d("ReQL").fromTableAscending(e.tables.thread_creation_status).getKeyRange(a);a=d("ReQLSuspense").first(b,f.id+":97");a==null||d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING)?h():i(a);function h(){n.current=b.subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING))return;n.current();i(a)})}function i(a){r(!1);try{var b=a.threadId;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").FAILURE)||b==null)throw c("FBLogger")("cm_web").warn("sidechat creation failed");s(b,!0)}catch(a){g()}}},g=function(){r(!1),o({title:h._("__JHASH__aLKnhppCDUk__JHASH__")})};if(j==null)return;r(!0);c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(e,function(b){return c("LSCreateCommunitySubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"createSocialChannel"),function(a){return b(a)},g)},[e,j,t,a.messageId,a.threadKey,s,o]);return[t?p:g,q]}g["default"]=a}),226);
__d("MWCMCreateSubthreadRowActionButton.react",["I64","Int64Hooks","LsFalcoEventEntryPoint","MWMessageActionButton.react","MWXIconThread","SubthreadCreationStrings.react","react","requireDeferred","useMWCMCreateSubthread","useOpenSubthreadView"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h,l=c("requireDeferred")("LsMessageActionFalcoEvent").__setRef("MWCMCreateSubthreadRowActionButton.react");function a(a){var b=j(11),e=a.message;a=c("useMWCMCreateSubthread")(e);var f=a[0];a=a[1];var g=c("useOpenSubthreadView")(),h=e.subthreadKey,m,n;b[0]!==h||b[1]!==e.messageId||b[2]!==e.threadKey||b[3]!==g||b[4]!==f?(m=function(){l.onReady(function(a){return a.log(function(){var a={};return{action:{container_module:"MWCMCreateSubthreadRowActionButton",type:h!=null?105:104},error:{message:void 0},extra:a,message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:e.messageId,recipient_id:void 0},thread:{group_size:(i||(i=d("I64"))).to_string(i.zero),id:i.to_string(e.threadKey),type:18}}})}),h!=null?g(h):f()},n=[e.messageId,e.threadKey,f,g,h],b[0]=h,b[1]=e.messageId,b[2]=e.threadKey,b[3]=g,b[4]=f,b[5]=m,b[6]=n):(m=b[5],n=b[6]);m=d("Int64Hooks").useCallbackInt64(m,n);n=h!=null?d("SubthreadCreationStrings.react").viewSubthreadLabel:d("SubthreadCreationStrings.react").createSubthreadLabel;var o;b[7]!==a||b[8]!==n||b[9]!==m?(o=k.jsx(c("MWMessageActionButton.react"),{disabled:a,icon:c("MWXIconThread"),label:n,onPress:m}),b[7]=a,b[8]=n,b[9]=m,b[10]=o):o=b[10];return o}g["default"]=a}),98);
__d("MWCMMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","I64","MWChatComposerMentionsViewItem.react","ReQL","ReQLSuspense","messengerMentionsLexicalCreateNodeStrategy","pageID","promiseDone","react","useCometTypeaheadViewListStrategy","useCommunityMembers","useMWCMMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useEffect,m=b.c,n={view:{minWidth:"x1jzhcrs",$$css:!0}};function a(a){var b=m(19),e=a.editor,g=a.fbGroupId,j=a.folderId;a=a.threadFBID;var o=(h||(h=c("useReStore")))(),p;b[0]!==o.tables.community_members||b[1]!==o.tables.contextual_profile_v1||b[2]!==g||b[3]!==j?(p=function(){return d("ReQL").fromTableAscending(o.tables.community_members.index("communitySource")).getKeyRange(g,(i||(i=d("I64"))).of_int32(8),c("pageID")).filter(function(a){a=a.isBlocked;return a!==!0}).take(6).map(function(a){var b,c;b=(b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(o.tables.contextual_profile_v1).getKeyRange(a.contactId,j),f.id+":60"))==null?void 0:b.profileName;return{key:(i||(i=d("I64"))).to_string(a.contactId),label:(c=b)!=null?c:a.name,rawData:{photoURI:a.profilePictureUrl,source:"all",subtitle:b!=null?a.name:a.subtitle},type:"entry"}})},b[0]=o.tables.community_members,b[1]=o.tables.contextual_profile_v1,b[2]=g,b[3]=j,b[4]=p):p=b[4];var q;b[5]!==o||b[6]!==g||b[7]!==j?(q=[o,g,j],b[5]=o,b[6]=g,b[7]=j,b[8]=q):q=b[8];p=d("ReQLSuspense").useArray(p,q,f.id+":48");b[9]!==a?(q=(i||(i=d("I64"))).of_string(a),b[9]=a,b[10]=q):q=b[10];a=c("useMWCMMentionsDataSourceResolverConfig")(g,q,p);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(q={viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:n.view},b[11]=q):q=b[11];p=c("useCometTypeaheadViewListStrategy")(q);var r=d("useCommunityMembers").useClearMemberList(8),s;b[12]!==r?(q=function(){return function(){c("promiseDone")(r(c("pageID")))}},s=[r],b[12]=r,b[13]=q,b[14]=s):(q=b[13],s=b[14]);l(q,s);b[15]!==a||b[16]!==e||b[17]!==p?(q=k.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:e,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:p}),b[15]=a,b[16]=e,b[17]=p,b[18]=q):q=b[18];return q}g["default"]=a}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:9297","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9297")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatForwardAction.react",["MWMessageActionButton.react","MWXIconShare","ODS","emptyFunction","react","useMWChatForward"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h;function l(a){(i||(i=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","forward"),a==null?void 0:a.onClick()}function a(a){var b=j(10),d=a.dropToggle,e=a.forwardDialogType,f=a.label,g=a.messageID;a=a.onForward;d=d===void 0?!1:d;e=e===void 0?"open_":e;var h;b[0]!==d||b[1]!==e||b[2]!==g||b[3]!==a?(h={dropToggle:d,forwardDialogType:e,messageID:g,onClose:c("emptyFunction"),onSend:a},b[0]=d,b[1]=e,b[2]=g,b[3]=a,b[4]=h):h=b[4];var i=c("useMWChatForward")(h);b[5]!==i?(d=function(){return l(i)},b[5]=i,b[6]=d):d=b[6];b[7]!==f||b[8]!==d?(e=k.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconShare"),label:f,loggingEvent:"open_forward_message_dialog",onPress:d,testid:void 0}),b[7]=f,b[8]=d,b[9]=e):e=b[9];return e}g["default"]=a}),98);
__d("MWChatPromptFlyoutFrontCard.react",["fbt","BaseTextArea.react","CometPlaceholder.react","MWChatPollFacepile.react","MWPActor.react","ReQL","ReQLSuspense","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(k||(k=d("react"))).c,m=k,n={frontCard:{backgroundColor:"x9bbmet",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"xi1c1fh",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",marginTop:"x1gslohp",marginBottom:"x12nagc",minHeight:"x1shn012",position:"x1n2onr6",width:"x6vytul",zIndex:"x1vjfegm",$$css:!0},textarea:{backgroundColor:"x9bbmet",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",display:"x1lliihq",flexGrow:"x1iyjqo2",fontSize:"x6prxxf",fontWeight:"x1xlr1w8",marginTop:"x1xmf6yo",marginEnd:"x1emribx",marginBottom:"x1e56ztr",marginStart:"x1i64zmx",paddingTop:"x1y1aw1k",textAlign:"x2b8uid",$$css:!0}};function o(){var a=l(10),b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g;a[0]!==b.tables.contacts||a[1]!==e?(g=function(){return d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e).map(function(a){return a.profilePictureUrl})},a[0]=b.tables.contacts,a[1]=e,a[2]=g):g=a[2];var h;a[3]!==b||a[4]!==e?(h=[b,e],a[3]=b,a[4]=e,a[5]=h):h=a[5];g=d("ReQLSuspense").useFirst(g,h,f.id+":72");a[6]!==g?(h=g!=null?[{profile_picture_url:g}]:[],a[6]=g,a[7]=h):h=a[7];g=h;a[8]!==g?(h=m.jsx(c("MWChatPollFacepile.react"),{contacts:g,direction:"reversed",gap:"negative",size:"mediumLarge"}),a[8]=g,a[9]=h):h=a[9];return h}function a(a){var b=l(17),d=a.maxLength,e=a.onChange,f=a.showFacepile,g=a.textareaXstyle,i=a.value;a=a.xstyle;f=f===void 0?!1:f;var k;b[0]!==a?(k=(j||(j=c("stylex")))(n.frontCard,a),b[0]=a,b[1]=k):k=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__M7osj0aoSaL__JHASH__"),b[2]=a):a=b[2];var p;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._("__JHASH__4kvNP1szhkx__JHASH__"),b[3]=p):p=b[3];var q;b[4]!==g?(q=[n.textarea,g],b[4]=g,b[5]=q):q=b[5];b[6]!==d||b[7]!==e||b[8]!==i||b[9]!==q?(g=m.jsx(c("BaseTextArea.react"),{"aria-label":a,maxLength:d,onChange:e,placeholder:p,suppressFocusRing:!0,unresizable:!0,value:i,xstyle:q}),b[6]=d,b[7]=e,b[8]=i,b[9]=q,b[10]=g):g=b[10];b[11]!==f?(a=f?m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx("div",{className:"x1gryazu xkrivgy x1l90r2v",children:m.jsx(o,{})})}):null,b[11]=f,b[12]=a):a=b[12];b[13]!==k||b[14]!==g||b[15]!==a?(p=m.jsxs("div",{className:k,children:[g,a]}),b[13]=k,b[14]=g,b[15]=a,b[16]=p):p=b[16];return p}g["default"]=a}),226);
__d("MessengerInCallReactionFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M26.5 5a1 1 0 1 1 2 0v2.25c0 .138.112.25.25.25H31a1 1 0 1 1 0 2h-2.25a.25.25 0 0 0-.25.25V12a1 1 0 1 1-2 0V9.75a.25.25 0 0 0-.25-.25H24a1 1 0 1 1 0-2h2.25a.25.25 0 0 0 .25-.25V5z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21 7.792a.485.485 0 0 0-.366-.475A11.027 11.027 0 0 0 18 7C11.925 7 7 11.925 7 18s4.925 11 11 11 11-4.925 11-11c0-.908-.11-1.79-.317-2.634a.485.485 0 0 0-.475-.366H27.5a3 3 0 0 1-3-3 .5.5 0 0 0-.5-.5 3 3 0 0 1-3-3v-.708zM14.25 14c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm7.5 0c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm1.75 7.5c0 2-2.5 4-5.5 4s-5.5-2-5.5-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWChatReactionsAddReactionIcon",["MWXSvgIcon","MessengerInCallReactionFilled.svg.react","SVGIcon"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(c("MessengerInCallReactionFilled.svg.react")),!0);g["default"]=a}),98);
__d("MWV2MessageRowActionsContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext,k=e.c;d={current:c("emptyFunction")};e={current:c("emptyFunction")};var l={current:c("emptyFunction")};c={current:c("emptyFunction")};d={forwardMessage:d,openReactionsMenu:e,removeMessage:l,replyToMessage:c};var m=f(d);function a(){return j(m)}function b(a){var b=k(3),c=a.children;a=a.value;var d;b[0]!==a||b[1]!==c?(d=i.jsx(m.Provider,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=d):d=b[2];return d}g.useMessageRowActionsContext=a;g.MWV2MessageRowActionsContextProvider=b}),98);
__d("MWXIconFaceHappyOutline",["MWXSvgIcon","SVGIcon","cr:9132","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9132")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatReactionsAction.react",["fbt","MWChatMessageId","MWChatReactionsActionContainer.react","MWChatReactionsAddReactionIcon","MWMessageActionButton.react","MWV2MessageRowActionsContext.react","MWXIconFaceHappyOutline","ODS","emptyFunction","react","useIsMultiReactionEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useCallback,m=b.useEffect;function a(a){var b=h._("__JHASH__czR8vxcW0mN__JHASH__"),e=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),f=e.openReactionsMenu,g=l(function(){f.current=c("emptyFunction");return},[f]);m(function(){return g},[g]);e=a.messageID;e=d("MWChatMessageId").getThreadId(e);var i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(e);return k.jsx(c("MWChatReactionsActionContainer.react"),babelHelpers["extends"]({},a,{children:function(a,e,g,h,l,m){g=function(){e(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")};f.current=g;return k.jsx(c("MWMessageActionButton.react"),{icon:i?c("MWChatReactionsAddReactionIcon"):c("MWXIconFaceHappyOutline"),label:b,loggingEvent:"click_react_to_message",onHoverIn:h,onHoverOut:l,onPress:g,onPressIn:m,ref:a,testid:void 0})}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWFalcoFeatureEventLogger",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g){c("gkx")("24170")&&c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:a,event_name:b,is_secured:d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),other_user_fbid:e!=null?(h||(h=d("I64"))).to_string(e):null,thread_fbid:(h||(h=d("I64"))).to_string(f)}})}g.logEvent=a}),98);
__d("MWMessageListLoggingContext",["react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));f=h;d=f.createContext;var j=f.useContext,k=f.useRef,l=f.c,m=d({current:""});function a(a){var b=l(2),c=a.children;a=a.flowInstanceId;a=k(a);b[0]!==c?(a=i.jsx(m.Provider,{value:a,children:c}),b[0]=c,b[1]=a):a=b[1];return a}function b(){return j(m)}function e(){var a=j(m);(a.current===null||a.current==="")&&(a.current=c("uuidv4")());return a}g.MWMessageListLoggingContext=a;g.useFlowInstanceIdContext=b;g.useFlowInstanceId=e}),98);
__d("MWPBaseMessageListRowActions.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useContext,k=e.c,l={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",columnGap:"xl5lk40",display:"x78zum5",width:"x1mqs8db",$$css:!0}},m=i.createContext("full");function a(){var a=k(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(d("react-strict-dom").html.div,{role:"none",style:l.root}),a[0]=b):b=a[0];return b}function n(a){var b=k(5),c=a.children;a=a.outgoing;a=a?l.outgoing:l.incoming;var e;b[0]!==a?(e=[l.root,a],b[0]=a,b[1]=e):e=b[1];b[2]!==e||b[3]!==c?(a=i.jsx(d("react-strict-dom").html.div,{role:"none",style:e,children:c}),b[2]=e,b[3]=c,b[4]=a):a=b[4];return a}function b(a){var b=k(4),c=a.children;a=a.showWith;a=a===void 0?"full":a;var e=j(m);e=e==="partial"&&a!=="partial";a=e&&l.hidden;var f;b[0]!==e||b[1]!==a||b[2]!==c?(f=i.jsx(d("react-strict-dom").html.div,{"aria-hidden":e,style:a,children:c}),b[0]=e,b[1]=a,b[2]=c,b[3]=f):f=b[3];return f}function c(a){var b=k(15),c=a.ariaHidden,e=a.children,f=a.onMouseEnter,g=a.onMouseLeave,h=a.outgoing,j=a.visibility;a=a.xstyle;j=j===void 0?"full":j;c=(c=c)!=null?c:!1;var l=h?o.outgoing:o.incoming,p;b[0]!==l||b[1]!==a?(p=[o.root,l,a],b[0]=l,b[1]=a,b[2]=p):p=b[2];b[3]!==h||b[4]!==e?(l=i.jsx(n,{outgoing:h,children:e}),b[3]=h,b[4]=e,b[5]=l):l=b[5];b[6]!==c||b[7]!==f||b[8]!==g||b[9]!==p||b[10]!==l?(a=i.jsx(d("react-strict-dom").html.div,{"aria-hidden":c,onMouseEnter:f,onMouseLeave:g,style:p,children:l}),b[6]=c,b[7]=f,b[8]=g,b[9]=p,b[10]=l,b[11]=a):a=b[11];b[12]!==j||b[13]!==a?(h=i.jsx(m.Provider,{value:j,children:a}),b[12]=j,b[13]=a,b[14]=h):h=b[14];return h}var o={incoming:{paddingStart:"x1t2a60a",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsEmptyList=a;g.MWPBaseMessageListRowActionsList=n;g.MWPBaseMessageListRowActionsListItem=b;g.MWPBaseMessageListRowActionsContainer=c}),98);
__d("MWV2OnlyGlobalRemoveMessageDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWV2OnlyGlobalRemoveMessageDialog.react").__setRef("MWV2OnlyGlobalRemoveMessageDialog.entrypoint")};g["default"]=a}),98);
__d("MWXIconDots3Vertical",["MWXSvgIcon","SVGIcon","cr:9121","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9121")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWPThreadCapabilitiesContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c;function a(a){var b=k(2),e=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),f=e.canUnsendMessage;e=e.isPaused;var g;b[0]!==a.cannotUnsendReason?(g=a.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(a.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,b[0]=a.cannotUnsendReason,b[1]=g):g=b[1];a=g;return f&&a&&!e}g["default"]=a}),98);
__d("useIsRollcallEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=Boolean(d("MWLSThread").useThread(a,h));return a}function h(a){return d("LSThreadBitOffset").has(152,a)}g["default"]=a}),98);
__d("useShouldAllowRollCallForMessage",["I64","LSIntEnum","MessagingAttachmentType","gkx","isStringNullOrEmpty","react","useIsRollcallEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c,l=[c("MessagingAttachmentType").IMAGE,c("MessagingAttachmentType").VIDEO];function a(a,b){var d=k(2),e=c("useIsRollcallEnabled")(a.threadKey);if(!e)return!1;if(c("gkx")("7782")&&!c("isStringNullOrEmpty")(a.text))return!0;d[0]!==b?(e=b.some(m),d[0]=b,d[1]=e):e=d[1];return e}function m(a){var b=(a=a.attachmentType)!=null?a:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE);return l.some(function(a){return(j||(j=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(a))})}g.ATTACHMENT_TYPES_THAT_ALLOW_PROMPTS=l;g.useShouldAllowRollCallForMessage=a}),98);
__d("MWV2ContextualActionsButton.react",["fbt","I64","Int64Hooks","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWMessageActionButton.react","MWPActor.react","MWPThreadCapabilitiesContext","MWV2LogMessageClick","MWV2MessageRowActionsContext.react","MWV2MessageRowIsRowFocusedContext.react","MWV2OnlyGlobalRemoveMessageDialog.entrypoint","MWXDeferredPopoverTrigger.react","MWXIconDots3Vertical","MessagingAttachmentType","MetaConfig","ReQL","ReQLSuspense","emptyFunction","gkx","isFeatureLimitEnabled","react","requireDeferred","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWPCanRemoveMessageGlobally","useMWXEntryPointDialog","useMWXLazyDialog","useReStore","useShouldAllowRollCallForMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useCallback,o=b.useContext,p=b.useEffect,q=c("requireDeferred")("MWV2ContextualActionsMenu.react").__setRef("MWV2ContextualActionsButton.react");function a(a){var b=a.attachment,e=a.canRemoveMessageGlobally,g=a.closeActionsMenu,l=a.containerThreadKey,r=a.extraActions,s=a.isSubthreadParentMessage;s=s===void 0?!1:s;var t=a.isUnavailableMessage;t=t===void 0?!1:t;var u=a.learnMoreDialogType,v=a.learnMoreOnMessageRemove,w=a.message,x=a.onRemoveMessageLogger,y=a.removeMessageDialogTitle,aa=a.setMoreMenuOpen,z=a.showBusinessMessageFeedbackOptionsInContextualMenu,A=a.showCreateSubthread;A=A===void 0?!1:A;var B=a.showFeedbackOptionsInContextualMenu,C=a.showForwardActionInContextualMenu,D=a.showLearnMoreInContextualMenu,E=a.showReactionInContextualMenu,F=a.showReplyActionInContextualMenu,ba=a.showSupportTranslationFeedbackOptionsInContextualMenu,G=a.threadType,H=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(H.tables.threads,["parentThreadKey","threadKey","threadType","cannotUnsendReason","threadSubtype"]).getKeyRange(w.threadKey)},[H,w.threadKey],f.id+":90");var I=a==null?void 0:a.parentThreadKey,ca=h._("__JHASH__I1DdCdLzOkz__JHASH__"),J=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),K=J.localDeleteMessageEnabled,L=J.modifyPinnedMessageV2Enabled;J=J.reportMessageToAdminEnabled;var M=c("useMWPCanRemoveMessageGlobally")(w),N=d("LSMessagingThreadTypeUtil").isArmadilloSecure(G),O=c("useIsSecureMessage")(H,w,{fallbackThreadType:G}),P=d("MWCMThreadTypes.react").isJoinedCMThread(G),Q=c("useIsReadOnlyFeatureLimitedWithThreadType")(G),R=d("ReQLSuspense").useFirst(function(){if(d("LSMessagingThreadTypeUtil").isCMSubthread(G))if(I==null)return d("ReQL").empty();else return d("ReQL").fromTableAscending(H.tables.participants).getKeyRange(I,w.senderId);else if(P)return d("ReQL").fromTableAscending(H.tables.participants).getKeyRange(w.threadKey,w.senderId);return d("ReQL").empty()},[P,G,I,H,w.senderId,w.threadKey],f.id+":123"),S=d("ReQLSuspense").useFirst(function(){return P?d("ReQL").fromTableAscending(H.tables.contacts,["capabilities","capabilities2"]).getKeyRange(w.senderId):d("ReQL").empty()},[H,P,w.senderId],f.id+":150");Q=(!N||c("isFeatureLimitEnabled")())&&Q;var T=!Q,U=d("MWPActor.react").useActor();S=S!=null&&((S=d("LSContactBitOffset").has(77,S))!=null?S:!1);var V=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(G);O=N&&!O;var W=(b==null?void 0:b.attachmentType)!=null&&((j||(j=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(j||(j=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO)));L=L&&!t&&!w.isUnsent&&!O&&!s&&!d("LSMessagingThreadTypeUtil").isCMSubthread(G)&&(!V||V&&d("MWPActor.react").isAPPlus()&&c("MetaConfig")._("107"))&&(!N||c("gkx")("4552"))&&!W;t=w.isUnsent;O=!1;P||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(G)||d("LSMessagingThreadTypeUtil").isCMSubthread(G)?O=!t&&M:N?O=!Q:O=K&&T;s=c("useMWXEntryPointDialog")(c("MWV2OnlyGlobalRemoveMessageDialog.entrypoint"),{});var X=s[0];V=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWV2RemoveMessageDialog.react").__setRef("MWV2ContextualActionsButton.react"));var Y=V[0];W=(R==null?void 0:R.isAdmin)===!0;t=(d("MWCMThreadTypes.react").isJoinedCMThread(G)||d("LSMessagingThreadTypeUtil").isCMSubthread(G))&&J&&!W&&!(j||(j=d("I64"))).equal(U,w.senderId)&&!w.isUnsent&&!S;N=(d("MWCMThreadTypes.react").isJoinedCMThread(G)||d("LSMessagingThreadTypeUtil").isCMSubthread(G))&&!(j||(j=d("I64"))).equal(U,w.senderId)&&!w.isUnsent;Q=d("useShouldAllowRollCallForMessage").useShouldAllowRollCallForMessage(w,[b].filter(Boolean));K=d("Int64Hooks").useCallbackInt64(function(){var a={canRemoveMessageGlobally:M,message:w,removeLogger:x,threadType:G},b={learnMoreOnMessageRemove:v,message:w},e=(j||(j=d("I64"))).equal(w.senderId,U);if(d("MWCMThreadTypes.react").isJoinedCMThread(G)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(G)||e&&!c("gkx")("24140")&&!w.isUnsent)return X(b);else return Y(a,c("emptyFunction"))},[U,v,w,x,Y,X,G,M]);T=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var Z=T.removeMessage;O?Z.current=K:Z.current=c("emptyFunction");var $=n(function(){if(c("gkx")("24096")){Z.current=c("emptyFunction");return}},[Z]);p(function(){return $},[$]);var da=o(d("MWV2MessageRowIsRowFocusedContext.react").context);if(a==null||!(C||F||E||L||B||z||O||t||N||Q||D||r!=null||c("gkx")("731")))return null;s=function(a){aa(function(){return a});return da.setFocused(function(){return a})};var ea={eventName:"click_message_contextual_action_button",threadKey:w.threadKey,threadType:G};return m.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"middle",onVisibilityChange:s,popoverProps:{attachment:b,canRemoveMessageGlobally:e&&M,closeActionsMenu:g,containerThreadKey:l,extraActions:r,learnMoreDialogType:u,learnMoreOnMessageRemove:v,message:w,onRemoveMessageLogger:x,removeMessageDialogTitle:y,showBusinessMessageFeedbackOptionsInContextualMenu:z,showCreatePrompt:Q,showCreateSubthread:A,showFeedbackOptionsInContextualMenu:B,showForwardActionInContextualMenu:C,showLearnMoreInContextualMenu:D,showPinMessageActionInContextualMenu:L,showReactionInContextualMenu:E,showReplyActionInContextualMenu:F,showReportCommunityMessageToAdmin:t,showReportCommunityMessageToFacebook:N,showSupportTranslationFeedbackOptionsInContextualMenu:ba,showUnsendInContextualMenu:O,thread:a},popoverResource:q,popoverType:"menu",position:"above",children:function(a,b){var e=function(){b();return d("MWV2LogMessageClick").log(H,w,48)};return m.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconDots3Vertical"),label:ca,loggingEvent:ea,onPress:e,ref:a,testid:void 0})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ForwardMessageButton.react",["fbt","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","MWChatForwardAction.react","MWChatMessageId","promiseDone","qex","react","useMWV2ForwardMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(i||(i=d("react"))).c,m=i;function a(a){var b=l(12),e=a.mediaGroupInfo,f=a.message,g=a.threadType,i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),n=c("qex")._("205")===!0;i=i?n?"cross_transport":"secure":n?"cross_transport":"open_";b[0]!==f.threadKey||b[1]!==f.timestampMs||b[2]!==f.messageId?(n=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(f.threadKey),f.messageId,j.to_string(f.timestampMs)),b[0]=f.threadKey,b[1]=f.timestampMs,b[2]=f.messageId,b[3]=n):n=b[3];n=n;var o=f.stickerId,p=d("useMWV2ForwardMessage").useMWV2ForwardMessage(f,g,void 0,e);e=!d("LSMessagingThreadTypeUtil").isArmadilloSecure(g);g=d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(1),f.displayedContentTypes)&&!f.textHasLinks||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(16384),f.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(2),f.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(4),f.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(512),f.displayedContentTypes)||o!=null&&(j||(j=d("I64"))).equal(o,(j||(j=d("I64"))).of_string("369239263222822"))||o!=null&&(j||(j=d("I64"))).equal(o,(j||(j=d("I64"))).of_string("369239343222814"))||o!=null&&(j||(j=d("I64"))).equal(o,(j||(j=d("I64"))).of_string("369239383222810"));f=e&&!g||a.dropForwardE2eeToggle===!0;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._("__JHASH__GvPr2MwluxY__JHASH__"),b[4]=o):o=b[4];b[5]!==p?(e=function(a){return c("promiseDone")(p(a))},b[5]=p,b[6]=e):e=b[6];b[7]!==f||b[8]!==i||b[9]!==n||b[10]!==e?(g=m.jsx(c("MWChatForwardAction.react"),{dropToggle:f,forwardDialogType:i,label:o,messageID:n,onForward:e}),b[7]=f,b[8]=i,b[9]=n,b[10]=e,b[11]=g):g=b[11];return g}g["default"]=a}),226);
__d("useMWChatReactionsActionContainerProps.react",["I64","LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWCMThreadTypes.react","MWChatMessageId","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useMemo;function a(a,b,c,e,f,g){var h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(c),l=(i||(i=d("I64"))).to_string(a.threadKey),m=i.to_string(a.timestampMs),n=k(function(){return d("MWChatMessageId").makeSent(l,a.messageId,m)},[l,a.messageId,m]),o=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(a,h,"reaction_tray"),p=d("MWCMThreadTypes.react").isBroadcastThread(c);c=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(c);var q=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),r=j(function(b,c){e&&e();return o(a.messageId,c?void 0:b,c?"remove_reaction":"reaction")},[e,o,a.messageId]),s=q&&p;return{closeActionsMenu:b,disableCustomReactions:s,hasReactionsV2:q,isBroadcastChannel:c,isBroadcastThread:p,isSecure:h,messageID:n,onVisibilityChange:f,reactionsPopoverResource:g,sendReaction:r}}g["default"]=a}),98);
__d("useMWV2ShouldDisableReactions.react",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","isFeatureLimitEnabled","react","useIsReactionsV2Enabled","useIsReadOnlyFeatureLimitedWithThreadType","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(a,b){var e=j(9),g;e[0]!==a?(g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),e[0]=a,e[1]=g):g=e[1];g=g;a=c("useIsReadOnlyFeatureLimitedWithThreadType")(a);var i;e[2]!==g||e[3]!==a?(i=(!g||c("isFeatureLimitEnabled")())&&a,e[2]=g,e[3]=a,e[4]=i):i=e[4];g=i;a=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(b);var k=(h||(h=c("useReStore")))();e[5]!==k.tables.reaction_v2_types?(i=function(){return d("ReQL").fromTableAscending(k.tables.reaction_v2_types)},e[5]=k.tables.reaction_v2_types,e[6]=i):i=e[6];e[7]!==k?(b=[k],e[7]=k,e[8]=b):b=e[8];e=d("ReQLSuspense").useFirst(i,b,f.id+":38")!=null;return g||a&&!e}g["default"]=a}),98);
__d("MWV2MessageReactionButton.react",["MWChatReactionsAction.react","react","useMWChatReactionsActionContainerProps.react","useMWV2ShouldDisableReactions.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(2),d=a.closeActionsMenu,e=a.message,f=a.onReactionsSendLogger,g=a.reactionsPopoverResource,h=a.setReactionsMenuOpen;a=a.threadType;var k=c("useMWV2ShouldDisableReactions.react")(a,e.threadKey);e=c("useMWChatReactionsActionContainerProps.react")(e,d,a,f,h,g);if(k)return null;b[0]!==e?(d=j.jsx(c("MWChatReactionsAction.react"),babelHelpers["extends"]({},e)),b[0]=e,b[1]=d):d=b[1];return d}g["default"]=a}),98);
__d("MWV2MessageListIsRowModalContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext,k=e.c,l=f(c("emptyFunction"));function a(a){var b=k(3),c=a.children;a=a.value;var d;b[0]!==a||b[1]!==c?(d=i.jsx(l.Provider,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=d):d=b[2];return d}function b(){return j(l)}g.MWV2MessageListIsRowModalContext=l;g.MWV2MessageListIsRowModalContextProvider=a;g.useMWV2MessageListIsRowModal=b}),98);
__d("MWXIconReply",["MWXSvgIcon","SVGIcon","cr:9275","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9275")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2SetReply.react",["MWPReplyContext.react","react","react-forget-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useContext;function a(){var a=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,i);a=a.setReply;return a}function i(a){return[a.setReply]}g["default"]=a}),98);
__d("MWV2ReplyButton.react",["fbt","MAWEditMessageContext.react","MWMessageActionButton.react","MWV2MessageListIsRowModalContext.react","MWV2MessageRowActionsContext.react","MWXIconReply","emptyFunction","gkx","react","useMWV2SetReply.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useContext,m=b.useEffect;function a(a){var b=a.message;a=h._("__JHASH__xFCj85w6vra__JHASH__");var e=c("useMWV2SetReply.react")(),f=l(d("MAWEditMessageContext.react").Context),g=f.editMessageData,i=f.setEditMessageData,n=d("MWV2MessageListIsRowModalContext.react").useMWV2MessageListIsRowModal();f=function(){g!=null&&i(null),e({messageId:b.messageId,offlineThreadingId:b.offlineThreadingId,sendStatusV2:b.sendStatusV2,threadKey:b.threadKey,timestampMs:b.timestampMs},b.threadKey),n("")};var o=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),p=o.replyToMessage;p.current=f;var q=k(function(){if(c("gkx")("24096")){p.current=c("emptyFunction");return}},[p]);m(function(){return q},[q]);return j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconReply"),label:a,loggingEvent:"message_reply",onPress:f,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("mwpMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("useEnableBusinessMessageFeedbackOptions",["I64","MWPActor.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWPActor.react").useActor();b=(h||(h=d("I64"))).equal(a.senderId,b);if(a.metadataDataclass==null)return!1;a=JSON.parse(a.metadataDataclass);return a&&a.business_thread_response_feedback&&a.business_thread_response_feedback.is_feedback_button_enabled_for_message===!0?!b:!1}g["default"]=a}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function a(a){var b=l(6),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.ai_bot_feedback_submission_status||b[1]!==a?(g=function(){var b;return d("ReQL").fromTableDescending(e.tables.ai_bot_feedback_submission_status).getKeyRange((b=a)!=null?b:"").filter(function(a){return(i||(i=d("I64"))).equal(a.feedbackSubmissionStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(a){return a.feedbackSubmissionStatus})},b[0]=e.tables.ai_bot_feedback_submission_status,b[1]=a,b[2]=g):g=b[2];var k;b[3]!==e||b[4]!==a?(k=[e,a],b[3]=e,b[4]=a,b[5]=k):k=b[5];b=d("ReQLSuspense").useFirst(g,k,f.id+":25");return b}g["default"]=a}),98);
__d("shouldUseImageGrouping",["I64","LSIntEnum","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e,f=a.displayedContentTypes,g=a.groupId;e=(h||(h=d("I64"))).to_int32((e=a.groupSize)!=null?e:(h||(h=d("I64"))).zero);return b&&c("gkx")("5318")===!0&&(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(2))&&g!=null&&a.groupIndex!=null&&a.groupSize!=null&&e>1}g["default"]=a}),98);
__d("useMAWBulkMediaUIState",["FBLogger","cr:11029","react","useEmptyFunction","useMAWBulkMediaDownloadStatusUIState"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");e.useMemo;var i=e.c,j=(f=b("cr:11029"))!=null?f:c("useEmptyFunction");function a(a){var b=i(5),d=c("useMAWBulkMediaDownloadStatusUIState")(a);a=j(a);if(b[0]!==a){var e;e=(e=a)!=null?e:[];b[0]=a;b[1]=e}else e=b[1];var f;b[2]!==e||b[3]!==d?(f={buldValidationResult:e,bulkDownloadStatus:d},b[2]=e,b[3]=d,b[4]=f):f=b[4];e=f;b=e;a!=null&&d.length!==a.length&&c("FBLogger")("messenger_web_e2ee").warn("Length of attachments download status should match validation result");return b}g["default"]=a}),98);
__d("useGetMediaGroupInformation",["I64","MAWGetIsMediaDownloadStatusEnabled","MAWMediaDownloadStatusUIStateType","ReQL","ReQLSuspense","react","shouldUseImageGrouping","useMAWBulkMediaUIState","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useMemo,l=b.c;function a(a,b,e){var g,j,l,n=(h||(h=c("useReStore")))(),o=a.groupId,p=a.threadKey;g=(i||(i=d("I64"))).to_int32((g=a.groupIndex)!=null?g:(i||(i=d("I64"))).zero);j=i.to_int32((j=a.groupSize)!=null?j:(i||(i=d("I64"))).zero);var q=c("shouldUseImageGrouping")(a,b);a=q?4:0;q&&j<4&&(a=j);var r=d("ReQLSuspense").useArray(function(){return q&&o!=null?d("ReQL").fromTableDescending(n.tables.messages.index("messageGroupId")).getKeyRange(o).map(function(a){var b;b=(b=d("ReQLSuspense").first(d("ReQL").fromTableDescending(n.tables.attachments).getKeyRange(p,a.messageId),f.id+":101"))!=null?b:null;return{attachment:b,message:a}}):d("ReQL").empty()},[n,o,p,q],f.id+":93"),s=k(function(){return r.sort(function(a,b){return(i||(i=d("I64"))).to_int32((a=a.message.groupIndex)!=null?a:(i||(i=d("I64"))).zero)-i.to_int32((a=b.message.groupIndex)!=null?a:(i||(i=d("I64"))).zero)})},[r]),t=q&&s.length>=1?(b=s[0])==null?void 0:b.message:null;b=d("ReQLSuspense").useFirst(function(){return q&&t!=null?d("ReQL").fromTableAscending(n.tables.messages.index("messageDisplayOrder")).getKeyRange(t.threadKey).bounds({gte:d("ReQL").key(t.primarySortKey)}).filter(function(a){return a.groupId!==t.groupId}).filter(function(a){return!a.isAdminMessage}):d("ReQL").empty()},[n,t,q],f.id+":131");e=m(s,q,e);var u=e.attachmentsToRetryDownload,v=e.mediaDownloadErrorsCount;e=e.mediaDownloadStatuses;if(q!==!0)return null;l=s.length>=1?(i||(i=d("I64"))).to_int32((l=(l=s[0])==null?void 0:(l=l.message)==null?void 0:l.groupIndex)!=null?l:(i||(i=d("I64"))).zero):0;l=g===l;var w=new Array(a),x=function(a){var b=s.findIndex(function(b){return b.message.groupIndex!=null&&(i||(i=d("I64"))).to_int32(b.message.groupIndex)===a});b===-1?w[a]={attachment:null,message:null}:w[a]={attachment:s[b].attachment,message:s[b].message}};for(var y=0;y<a&&y<a;++y)x(y);return{attachmentsToRetryDownload:u,groupId:o,groupIndex:g,groupSize:j,groupsLastMessage:s!=null&&s.length>0?s[s.length-1].message:null,groupsNextMessage:(x=b)!=null?x:null,hasAllMessagesSent:s.every(function(a){return(i||(i=d("I64"))).equal(a.message.sendStatusV2,i.of_int32(2))}),hasMissingMedia:s.some(function(a){return a.attachment==null}),hasMissingMessages:s.length!==j,isFirstMediaMessageInGroup:l,isMediaGroupLastMessage:b==null,mediaDownloadErrorsCount:v,mediaDownloadStatuses:e,messagesAndAttachments:s,messagesAndAttachmentsShownInGroup:w,tileSize:a}}function m(a,b,e){var f=l(22);bb0:{if(!b||d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()!==!0){f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],f[0]=b):b=f[0];b=b;break bb0}if(f[1]!==a||f[2]!==e){var g;f[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){a=a.attachment;return a},f[4]=g):g=f[4];var h;f[5]!==e?(h=function(a){return{attachment:a,mediaRenderQpl:e,statusKey:a.attachmentFbid}},f[5]=e,f[6]=h):h=f[6];g=a.map(g).filter(Boolean).map(h);f[1]=a;f[2]=e;f[3]=g}else g=f[3];b=g}h=b;a=c("useMAWBulkMediaUIState")(h);g=a.bulkDownloadStatus;f[7]!==g?(b=g!=null?g:[],f[7]=g,f[8]=b):b=f[8];a=b;var i=a;if(f[9]!==i){f[11]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return d("MAWMediaDownloadStatusUIStateType").isErrorState(a)},f[11]=g):g=f[11];b=i.filter(g);f[9]=i;f[10]=b}else b=f[10];a=b;g=a;if(f[12]!==i||f[13]!==h){f[15]!==i?(b=function(a,b){return d("MAWMediaDownloadStatusUIStateType").isRetryableErrorState(i[b])},f[15]=i,f[16]=b):b=f[16];f[17]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){a=a.attachment;return a},f[17]=a):a=f[17];b=h.filter(b).map(a);f[12]=i;f[13]=h;f[14]=b}else b=f[14];a=b;h=a;b=g.length;f[18]!==h||f[19]!==b||f[20]!==i?(a={attachmentsToRetryDownload:h,mediaDownloadErrorsCount:b,mediaDownloadStatuses:i},f[18]=h,f[19]=b,f[20]=i,f[21]=a):a=f[21];return a}g["default"]=a}),98);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c;function a(a,b){var e=k(2),f=d("MWPContactContext.react").useMWPContactStableContext();f=f.contact;if(a==null)return!1;if(!b)return!1;e[0]!==f?(a=f!=null&&(i||(i=d("I64"))).equal(f.contactTypeExact,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)),e[0]=f,e[1]=a):a=e[1];return a}g["default"]=a}),98);
__d("useIsLastNonAdminMessage",["ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=10;function a(a,b){var e=j(6),g=(h||(h=c("useReStore")))(),i;e[0]!==g.tables.messages||e[1]!==a?(i=function(){return d("ReQL").fromTableDescending(g.tables.messages.index("messageDisplayOrder"),["messageId","isAdminMessage"]).getKeyRange(a).take(k).filter(function(a){return a.isAdminMessage===!1})},e[0]=g.tables.messages,e[1]=a,e[2]=i):i=e[2];var l;e[3]!==g||e[4]!==a?(l=[g,a],e[3]=g,e[4]=a,e[5]=l):l=e[5];e=d("ReQLSuspense").useFirst(i,l,f.id+":29");return(e==null?void 0:e.messageId)===b}g["default"]=a}),98);
__d("useIsMessageIDInNewFormat",["justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c,j="mid.$g",k="mid.$m",l="mid.$c",m="mid.$o";function a(a,b,d){var e=i(2),f;e[0]!==a?(f=a.startsWith(k)||a.startsWith(j)||a.startsWith(m)||a.startsWith(l),e[0]=a,e[1]=f):f=e[1];a=f;e=a;if(!c("justknobx")._("2481"))return!0;return b&&d?!0:e}g["default"]=a}),98);
__d("useSupportMessagingGroupThreadSubtype.react",["I64","LSIntEnum","MessagingThreadSubtype","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function a(a){var b,e=l(2),g=(h||(h=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadSubtype"]).getKeyRange(a)},[g,a],f.id+":24"))!=null?b:{};b=b.threadSubtype;if(b==null)return!1;var k;e[0]!==b?(k=(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").SUPPORT_MESSAGING_THREAD)),e[0]=b,e[1]=k):k=e[1];return k}g.useSupportMessagingGroupThreadSubtype=a}),98);
__d("MWMessageRowActions.react",["$InternalEnum","AdsAIMessengerUtils","CometErrorBoundary.react","I64","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingMessageTypeUtil","LSMessagingThreadTypeUtil","MNLSXMALayoutType","MWBlockingProtectionContext.react","MWCMCreateSubthreadRowActionButton.react","MWCMIsSubthreadContext.react","MWCMThreadTypes.react","MWGroupBlockingProtectionUtils","MWLSThreadDisplayContext","MWPBaseMessageListRowActions.react","MWPThreadCapabilitiesContext","MWV2ContextualActionsButton.react","MWV2ForwardMessageButton.react","MWV2MessageReactionButton.react","MWV2MessageRowActionsContext.react","MWV2OneToOneThreadBlockedContext.react","MWV2ReplyButton.react","MWXTooltipGroup.react","MessagingAttachmentType","MetaConfig","ReQL","ReQLSuspense","cr:1669","cr:1670","cr:3463","cr:895","emptyFunction","gkx","isFeatureLimitEnabled","isMWBumpMessage","justknobx","mwCMIsAnyCMThread","mwpMessageHasAttachment","react","useEmptyFunction","useEnableBusinessMessageFeedbackOptions","useGenAIFeedbackSubmissionStatus","useGetMediaGroupInformation","useIsGenAiFeedbackEnabled","useIsLastNonAdminMessage","useIsMessageIDInNewFormat","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWGetOtherUserContact","useMWHasForwardAction","useMWIsContactRestricted","useMWV2MessageForwardAction","useReStore","useSupportMessagingGroupThreadSubtype.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.useCallback,n=e.useEffect,o=e.useState,p=e.c,q=(e=b("cr:895"))!=null?e:c("useEmptyFunction"),aa=c("gkx")("26372"),r=c("gkx")("1241"),s={shrinkSpaceForFeedbackActions:{maxWidth:"x1x67gh",$$css:!0}},t=b("$InternalEnum").Mirrored(["AI_STICKERS"]);function u(a){var e=a.canRemoveMessageGlobally,g=a.closeActionsMenu,k=a.containerThreadKey,o=a.dropForwardE2eeToggle,p=a.extraActions,q=a.learnMoreOnMessageRemove,s=a.mediaGroupInfo,u=a.message,v=a.onReactionsSendLogger,w=a.onRemoveMessageLogger,x=a.outgoing,y=a.reactionsPopoverResource,z=a.removeMessageDialogTitle,A=a.setMoreMenuOpen,B=a.setReactionsMenuOpen,C=a.shouldHideForwardOption,D=a.shouldHideHoverMenuReact,E=a.shouldShowAdsAIFeedbackButtons;E=E===void 0?!1:E;a=a.threadType;var F=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();F=F.isSubthread;var G=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),H=(h||(h=c("useReStore")))();F=F&&u.subthreadKey!=null;var I=c("useMWGetOtherUserContact")(u.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);I=c("useMWIsContactRestricted")(I);var J=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),K=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),L=c("useIsSecureMessage")(H,u,{fallbackThreadType:a}),M=!(i||(i=d("I64"))).equal(u.displayedContentTypes,(j||(j=d("LSIntEnum"))).ofNumber(1)),N=d("LSMessagingMessageTypeUtil").isUnavailableMessage(u.displayedContentTypes),O=c("mwCMIsAnyCMThread")(a)&&(i||(i=d("I64"))).equal(u.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4)),P=d("ReQLSuspense").useFirst(function(){return M?d("ReQL").fromTableAscending(H.tables.attachments).getKeyRange(u.threadKey,u.messageId):d("ReQL").empty()},[H,u.messageId,u.threadKey,M],f.id+":160"),Q=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();Q=Q.blurMediaEnabled;Q=c("gkx")("24098")&&Q;var R=P!=null?(i||(i=d("I64"))).equal(P.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):!1,S=P!=null?(i||(i=d("I64"))).equal(P.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):!1;Q=Q&&(R||S);S=i.equal((R=u.displayedContentTypes)!=null?R:(i||(i=d("I64"))).zero,j.ofNumber(128));R=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();var ba=R.isPaused,T=R.reactEnabled,U=R.reactionsV2WriteEnabled,ca=R.replyEnabled;R=R.subThreadCreationEnabled;var V=(P==null?void 0:P.xmaLayoutType)!=null&&(i||(i=d("I64"))).equal(P.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT)),W=(P==null?void 0:P.mustacheText)!=null&&u.stickerId!=null;W=W?t.AI_STICKERS:null;V=!V&&!u.isUnsent||!M||S;S=c("useMWHasForwardAction")(a,u,P,C,s);C=S.hasForwardAction;S=S.shouldShowForwardAction;var da=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!K||c("isFeatureLimitEnabled")());T=!G&&!I&&!u.isUnsent&&!O&&(T||U);U=c("useIsGenAiFeedbackEnabled")(u.botResponseId,aa);var X=c("useGenAIFeedbackSubmissionStatus")(u.botResponseId),Y=U&&X==null;U=U&&X!=null;X=c("useEnableBusinessMessageFeedbackOptions")(u)&&r;var Z=c("isMWBumpMessage")(u)&&u.replySourceId==null,$=c("useIsMessageIDInNewFormat")(u.messageId,K,L);L=K&&!L;L=!L||c("gkx")("4054");G=!G&&!N&&!I&&!O&&ca&&!u.isUnsent&&!F&&!da&&!E&&!Z&&$&&L;I=G&&!S&&!Y;O=!N&&T&&!D&&!E;ca=O&&!Y;da=O&&Y;Z=d("MWCMThreadTypes.react").isJoinedCMThread(a)&&!ba&&R&&!F&&V;$=Z&&J==="Inbox";L=d("useSupportMessagingGroupThreadSubtype.react").useSupportMessagingGroupThreadSubtype(u.threadKey);T=c("gkx")("7815")&&c("justknobx")._("3264")&&L;D=c("useMWV2MessageForwardAction")(K,u,a);O=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var ea=O.forwardMessage;C&&(ea.current=D);var fa=m(function(){if(c("gkx")("24096")){ea.current=c("emptyFunction");return}},[ea]);n(function(){return fa},[fa]);ba=u.messageId;R=u.offlineThreadingId;V=u.sendStatusV2;J=u.threadKey;L=u.timestampMs;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:x,children:[S&&!Q?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(c("MWV2ForwardMessageButton.react"),{dropForwardE2eeToggle:o,mediaGroupInfo:s,message:u,threadType:a})}):null,ca?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2MessageReactionButton.react"),{closeActionsMenu:g,message:u,onReactionsSendLogger:v,reactionsPopoverResource:y,setReactionsMenuOpen:B,threadType:a})}):null,I&&!Q?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ReplyButton.react"),{message:{messageId:ba,offlineThreadingId:R,sendStatusV2:V,threadKey:J,timestampMs:L}})}):null,$&&l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWCMCreateSubthreadRowActionButton.react"),{message:u})}),Y&&b("cr:1670")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:1670"),{message:u})}):null,Y&&b("cr:1669")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:1669"),{message:u})}):null,E&&b("cr:3463")!=null?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:3463"),{message:u})}):null,l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ContextualActionsButton.react"),{attachment:P,canRemoveMessageGlobally:e,closeActionsMenu:g,containerThreadKey:k,extraActions:p,isSubthreadParentMessage:F,isUnavailableMessage:N,learnMoreDialogType:W,learnMoreOnMessageRemove:q,message:u,onRemoveMessageLogger:w,removeMessageDialogTitle:z,setMoreMenuOpen:A,showBusinessMessageFeedbackOptionsInContextualMenu:X,showCreateSubthread:Z&&!$,showFeedbackOptionsInContextualMenu:U,showForwardActionInContextualMenu:!S&&C,showLearnMoreInContextualMenu:W!==null&&c("gkx")("485"),showReactionInContextualMenu:da,showReplyActionInContextualMenu:!I&&G,showSupportTranslationFeedbackOptionsInContextualMenu:T,threadType:a})})]})}u.displayName=u.name+" [from "+f.id+"]";function a(a){var b,e=p(30),f=a.ariaHidden,g=a.canRemoveMessageGlobally,h=a.containerThreadKey,k=a.dropForwardE2eeToggle,m=a.extraActions,n=a.focused,r=a.hidden,t=a.hovered,w=a.isSecureMessage,x=a.learnMoreOnMessageRemove,y=a.message,z=a.onMouseEnter,A=a.onMouseLeave,B=a.onReactionsSendLogger,C=a.onRemoveMessageLogger,D=a.outgoing,E=a.reactionsPopoverResource,F=a.removeMessageDialogTitle,G=a.shouldHideForwardOption,H=a.shouldHideHoverMenuReact,I=a.showPersistentGenAiFeedbackActionButtons;a=a.threadType;r=r===void 0?!1:r;G=G===void 0?!1:G;H=H===void 0?!1:H;I=I===void 0?!1:I;var J=o(!1),K=J[0];J=J[1];var L=o(!1),M=L[0];L=L[1];var N;e[0]!==y.displayedContentTypes?(N=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(2),y.displayedContentTypes),e[0]=y.displayedContentTypes,e[1]=N):N=e[1];N=N;b=(b=q(y.threadKey,y.botResponseId,aa))!=null?b:!1;var O;e[2]!==y?(O=d("AdsAIMessengerUtils").isMessageFromAdsAI(y),e[2]=y,e[3]=O):O=e[3];O=O;var P=c("useIsLastNonAdminMessage")(y.threadKey,y.messageId);P=P&&O;w=c("useGetMediaGroupInformation")(y,w===!0);var Q=w!=null&&(w==null?void 0:w.hasAllMessagesSent)===!1;t=t||n||M||K;n=!r&&!Q&&(t||b||N||P);M=c("MWBlockingProtectionContext.react").useHook();K=M.findMessageId;r=d("MWGroupBlockingProtectionUtils").useMWIsMessageSentByBlockedContact(y.senderId,y.threadKey);if(r&&!K(y.messageId))return null;Q=(i||(i=d("I64"))).to_string(y.threadKey)===c("MetaConfig")._("83")&&!D&&c("mwpMessageHasAttachment")(y)&&c("gkx")("5131");if(Q)return null;N=(b=f)!=null?b:!1;P=t===!0?"full":"partial";M=I?s.shrinkSpaceForFeedbackActions:void 0;if(e[4]!==n||e[5]!==g||e[6]!==m||e[7]!==h||e[8]!==k||e[9]!==x||e[10]!==w||e[11]!==y||e[12]!==B||e[13]!==C||e[14]!==D||e[15]!==E||e[16]!==F||e[17]!==G||e[18]!==H||e[19]!==O||e[20]!==a){Q=n?l.jsx(u,{canRemoveMessageGlobally:(r=g)!=null?r:!0,closeActionsMenu:c("emptyFunction"),containerThreadKey:h,dropForwardE2eeToggle:k,extraActions:(K=m)!=null?K:null,learnMoreOnMessageRemove:x,mediaGroupInfo:w,message:y,onReactionsSendLogger:B,onRemoveMessageLogger:C,outgoing:D,reactionsPopoverResource:E,removeMessageDialogTitle:F,setMoreMenuOpen:L,setReactionsMenuOpen:J,shouldHideForwardOption:G,shouldHideHoverMenuReact:H,shouldShowAdsAIFeedbackButtons:O,threadType:a}):null;e[4]=n;e[5]=g;e[6]=m;e[7]=h;e[8]=k;e[9]=x;e[10]=w;e[11]=y;e[12]=B;e[13]=C;e[14]=D;e[15]=E;e[16]=F;e[17]=G;e[18]=H;e[19]=O;e[20]=a;e[21]=Q}else Q=e[21];e[22]!==N||e[23]!==z||e[24]!==A||e[25]!==D||e[26]!==P||e[27]!==M||e[28]!==Q?(f=l.jsx(c("CometErrorBoundary.react"),{fallback:v,children:l.jsx(c("MWXTooltipGroup.react"),{children:l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:N,onMouseEnter:z,onMouseLeave:A,outgoing:D,visibility:P,xstyle:M,children:Q})})}),e[22]=N,e[23]=z,e[24]=A,e[25]=D,e[26]=P,e[27]=M,e[28]=Q,e[29]=f):f=e[29];return f}function v(){return null}g.LearnMoreDialogType=t;g.MWMessageRowActions=a}),98);
__d("RollCallContributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("RollCallPromptType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("MWPromptCreationUtils",["I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessagingThreadAttributionType","LSOptimisticContributeToTextPromptStoredProcedure","LSOptimisticCreateRollCallStoredProcedure","LSShape","LSVec","MWXMAAttachmentSharedStackConstants","MessagingAttachmentType","OfflineThreadingId","Promise","ReQL","RollCallContributionType","RollCallPromptType","XComposerPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,g,k){return new(j||(j=b("Promise")))(function(b,j){a.runInTransaction(function(a){return c("LSOptimisticCreateRollCallStoredProcedure")(c("LSFactory")(a),{prompt:g,promptType:(h||(h=d("LSIntEnum"))).ofNumber(k),threadKey:e})},"readwrite",void 0,void 0,f.id+":49").then(function(e){var f=e[0],g=d("ReQL").fromTableAscending(a.tables.roll_calls).subscribe(function(a,e){if(e.operation==="add"||e.operation==="put"){a=e.value.offlineThreadingId;var h=(i||(i=d("I64"))).to_int32(e.value.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE;h&&a!=null&&(i||(i=d("I64"))).equal(a,f)&&(g(),b(e.value.rollCallId))}})})["catch"](function(a){j(a)})})}function k(a,b,e,g,h){return a.runInTransaction(function(a){return c("LSOptimisticContributeToTextPromptStoredProcedure")(c("LSFactory")(a),{productAttribution:String(c("LSMessagingThreadAttributionType").ROLLCALL),promptId:(i||(i=d("I64"))).to_string(g),senderId:b,text:(a=h)!=null?a:"",threadKey:e})},"readwrite",void 0,void 0,f.id+":91")}function l(a,b,e,g,j,k,l,m){var n,o=d("OfflineThreadingId").createOfflineThreadingID(),p=(n=m==null?void 0:m.startsWith("video/"))!=null?n:!1;return a.runInTransaction(function(a){return c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord({attachment_fbid:o,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(p?c("MessagingAttachmentType").VIDEO:c("MessagingAttachmentType").IMAGE),has_media:!0,has_xma:!0,offline_attachment_id:o,playable_url:p?l:void 0,preview_height:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT),preview_url:p?void 0:l,preview_url_mime_type:p?void 0:m,preview_width:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH)})]),contribution_type:h.ofNumber(c("RollCallContributionType").MEDIA),product_fbid:i.to_string(j),product_type:"roll_call",source:h.ofNumber(c("LSMessagingThreadAttributionType").ROLLCALL)}),senderId:b,text:k,threadKey:e,threadType:g})},"readwrite",void 0,void 0,f.id+":114").then(function(a){a=a[0];return a})}function e(a,d,e,f,g,h,i,m,n){switch(i){case c("RollCallPromptType").MEDIA:return l(a,d,e,f,g,h,m,n);case c("RollCallPromptType").TEXT:return k(a,d,e,g,h);default:return(j||(j=b("Promise"))).reject("Unsupported type")}}function m(a,b,e,f){var g=d("OfflineThreadingId").createOfflineThreadingID();a=a;a.uploadID=g;var h=new(c("XComposerPhotoUploader"))({onUploadFailure:function(a,b){},onUploadSuccess:function(a,b){},uploadEndpoint:"/messenger/upload_roll_call/"});h.getAsyncFileUploadRequest([a],[g],{data:{message_otid:e,roll_call_id:(i||(i=d("I64"))).to_string(b),thread_id:f}}).send()}g.createAuthoritiativeRollCall=a;g.createOptimisticRollCallMessage=e;g.startRollCallMediaUpload=m}),98);
__d("MWShowMessagePromptPopoverContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e.useMemo;var k=e.useRef,l=e.c,m=f([{current:c("emptyFunction")},c("emptyFunction")]);function a(){return j(m)}function b(a){var b=l(3);a=a.children;var d=k(c("emptyFunction")),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[d,function(a){d.current=a}],b[0]=e):e=b[0];e=e;e=e;b[1]!==a?(e=i.jsx(m.Provider,{value:e,children:a}),b[1]=a,b[2]=e):e=b[2];return e}g.useMWShowMessagePromptPopoverContext=a;g.MWShowMessagePromptPopoverContextProvider=b}),98);
__d("MwbActorExperienceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3231");b=d("FalcoLoggerInternal").create("mwb_actor_experience_event",a);e=b;g["default"]=e}),98);
__d("getMWOtherUserFBID",["I64","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=d("LSMessagingThreadTypeUtil").isOneToOne(e);if(!f)return null;f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);if(!f)return c;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(c).filter(function(a){a=a.contactId;return!(h||(h=d("I64"))).equal(a,b)}).take(1)));return e==null?void 0:e.contactId});return i.apply(this,arguments)}g.getMWOtherUserFBID=a}),98);
__d("useLogMAWEditMessage",["I64","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsMessageActionFalcoEvent","MessengerWebUXLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.c;function a(){var a=j(2),b=c("MessengerWebUXLogger").useInteractionLogger(),e;a[0]!==b?(e=function(a,e,f,g,h){d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)?b==null?void 0:b({eventName:k(h)}):c("LsMessageActionFalcoEvent").log(function(){return{action:{type:l(h)},error:{message:void 0},extra:{is_community_chats:d("LSMessagingThreadTypeUtil").isPublicCMThread(a)?"1":"0"},message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:f,recipient_id:(i||(i=d("I64"))).to_string(g)},thread:{group_size:i.to_string(i.zero),id:e!=null?(i||(i=d("I64"))).to_string(e):void 0,type:d("LSMessagingThreadTypeUtil").isGroup(a)?2:1}}})},a[0]=b,a[1]=e):e=a[1];return e}function k(a){switch(a){case"EDIT_MESSAGE":return"edit_message";case"EDIT_MESSAGE_CANCEL":return"edit_message_cancel";case"EDIT_MESSAGE_TAP":return"edit_message_tap"}}function l(a){switch(a){case"EDIT_MESSAGE":return 90;case"EDIT_MESSAGE_CANCEL":return 92;case"EDIT_MESSAGE_TAP":return 89}}g["default"]=a}),98);
__d("useMWFalcoFeatureEventLogger",["MWFalcoFeatureEventLogger","MWPActor.react","getMWOtherUserFBID","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useCallback;var j=b.c;function a(a,b){var e=j(5),f=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i;e[0]!==f||e[1]!==g||e[2]!==a||e[3]!==b?(i=function(c,e){d("getMWOtherUserFBID").getMWOtherUserFBID(f,g,a,b).then(function(f){d("MWFalcoFeatureEventLogger").logEvent(c,e,f,a,b)})["catch"](function(){})},e[0]=f,e[1]=g,e[2]=a,e[3]=b,e[4]=i):i=e[4];return i}g["default"]=a}),98);
__d("useMWPIsMessagePinned",["ReQL","ReQLSuspense","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useDeferredValue,k=b.c;function a(a){var b=k(8),e=(h||(h=c("useReStore")))(),g,i;b[0]!==a||b[1]!==e?(g=function(){return a!=null?d("ReQL").fromTableAscending(e.tables.msg_pinned_messages_v2).getKeyRange(a.threadKey,a.messageId):d("ReQL").empty()},i=[e,a],b[0]=a,b[1]=e,b[2]=g,b[3]=i):(g=b[2],i=b[3]);g=!!d("ReQLSuspense").useFirst(g,i,f.id+":29");var l;b[4]!==a||b[5]!==e?(i=function(){return a!=null&&!a.isUnsent?d("ReQL").fromTableAscending(e.tables.client_web_pinned_messages).getKeyRange(a.threadKey,a.offlineThreadingId):d("ReQL").empty()},l=[e,a],b[4]=a,b[5]=e,b[6]=i,b[7]=l):(i=b[6],l=b[7]);b=!!d("ReQLSuspense").useFirst(i,l,f.id+":39");return j(g||b&&c("gkx")("4552"))}g["default"]=a}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");b.useCallback;var k=b.c;function a(a,b){var e=k(4),g=(h||(h=c("useReStore")))(),j;e[0]!==g||e[1]!==a||e[2]!==b?(j=function(e){c("promiseDone")(g.runInTransaction(function(b){return c("LSSubmitGenAIBotFeedbackStoredProcedure")(c("LSFactory")(b),{botFeedbackKind:(i||(i=d("LSIntEnum"))).ofNumber(e),botResponseId:a||"",feedbackKindType:i.ofNumber(e)})},"readwrite",void 0,void 0,f.id+":30"),b)},e[0]=g,e[1]=a,e[2]=b,e[3]=j):j=e[3];return j}g["default"]=a}),98);