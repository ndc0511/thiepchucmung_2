;/*FB_PKG_DELIM*/

__d("LSInsertOrUpdateThreadLimit",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.db.table(287).fetch([[[a[0]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(287).add({threadKey:a[0],enforcements:a[1],startTimestampSeconds:a[3],expirationTimestampSeconds:a[4]}):(d=c.item,b.i64.eq(d.enforcements,a[1])&&b.i64.eq(d.startTimestampSeconds,a[3])&&b.i64.eq(d.expirationTimestampSeconds,a[4])?b.resolve():b.forEach(b.db.table(287).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({enforcements:a[1],startTimestampSeconds:a[3],expirationTimestampSeconds:a[4]})}))})},function(c){return b.db.table(287).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,a[2]!==void 0?b.forEach(b.db.table(287).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({enforcementContentId:a[2]})}):b.resolve())})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsInsertOrUpdateThreadLimitStoredProcedure";e.exports=a}),null);